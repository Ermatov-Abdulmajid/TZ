"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[922],{3088:function(e,t,n){n.d(t,{S:function(){return w},w:function(){return Z}});var r=n(17576),i=n(49919),a=n(29922),s=n(50959),o=n(44478),c=n(82242),l=n(84875),u=n.n(l),d=n(78979),p=n(78794),f=n(37206),m=n(64514),v=n(71160),h={root:"wurvC",point:"E_OjH",tooltipWrapper:"f4Ku2","fade-in":"CYzcg",fadeIn:"CYzcg",fadingOut:"WkHWF","fade-out":"S__jW",fadeOut:"S__jW"},g=n(11527),k=["zIndex","cursor","checkIsTarget","getEllipsisDOM"],x=["getEllipsisDOM","content"],_=(0,s.forwardRef)((function(e,t){var n=e.tooltipProps,r=e.getPopupContainer,o=e.onClosePopover,l=e.position,p=e.cursor,f=void 0===p?"default":p,k=(0,s.useState)(!0),x=(0,a.Z)(k,2),_=x[0],Z=x[1],w=(0,s.useState)(!1),y=(0,a.Z)(w,2),S=y[0],b=y[1],C=l.top,j=l.left-10,I=(0,s.useRef)(null),N=(0,s.useRef)(null),F=(0,c.Z)((function(){var e;null===(e=N.current)||void 0===e||e.destroy(),b(!1),Z(!1)})),E=(0,c.Z)((function(){var e,t=r().querySelector(".".concat(h.tooltipWrapper));if(t&&(null===(e=N.current)||void 0===e?void 0:e.tooltipWrapper)!==t){t.addEventListener("animationend",F);var n=new m.B;n.timeout(500).then(F),N.current={tooltipWrapper:t,destroy:function(){t.removeEventListener("animationend",F),n.cancel(),N.current=null}}}}));(0,s.useImperativeHandle)(t,(function(){return{hide:function(){E(),b(!0)}}}));var R=(0,s.useMemo)((function(){return{default:{height:18,width:12},"not-allowed":{height:(0,v.c)()?30:15,width:15}}}),[]),L=R[f]||R.default;return(0,g.jsx)(d.u,(0,i.Z)((0,i.Z)({autoAdjustOverflow:!0,position:"bottomLeft",motion:!1},n),{},{className:u()(n.className,h.tooltipWrapper,S&&h.fadingOut),trigger:"custom",visible:_,showArrow:!1,rePosKey:"".concat(C,"-").concat(j),getPopupContainer:r,onVisibleChange:function(e){var t;!e&&o(),null===(t=n.onVisibleChange)||void 0===t||t.call(n,e)},children:(0,g.jsx)("div",{className:h.point,tabIndex:-1,ref:I,style:(0,i.Z)({top:C,left:j},L)})}))}));function Z(e){var t=e.zIndex,n=void 0===t?1060:t,l=e.cursor,u=void 0===l?"default":l,d=e.checkIsTarget,m=e.getEllipsisDOM,v=(0,r.Z)(e,k),x=(0,s.useRef)(null),Z=(0,s.useRef)(null),w=(0,s.useState)(null),y=(0,a.Z)(w,2),S=y[0],b=y[1],C=(0,p.$)().i18n,j=function(){var e=v.content;if("function"!=typeof e)return e;if(!x.current)return null;var t=x.current.targetElement;return function(n){return e((0,i.Z)((0,i.Z)({},n),{},{target:t}))}},I=(0,c.Z)((function(){x.current&&(x.current.destroy(),x.current=null,b(null))})),N=(0,c.Z)((function(){var e;null===(e=x.current)||void 0===e||e.destroy(),x.current=null})),F=(0,c.Z)((function(e,t){var r=null==m?void 0:m(t);if(!(r&&r.offsetWidth>=r.scrollWidth)){if(x.current){if(!x.current.hasLeaved&&x.current.targetElement===t)return;I()}var i=document.createElement("div");i.className=h.root,i.style.zIndex="".concat(n);var a=function(e){b({left:e.clientX,top:e.clientY})},s=function(e){t===e.target&&(x.current&&(x.current.hasLeaved=!0),Z.current?Z.current.hide():I())};t.addEventListener("mousemove",a),t.addEventListener("mouseleave",s),document.body.appendChild(i);var c=(0,o.createRoot)(i);x.current={container:i,targetElement:t,hasLeaved:!1,reactRoot:c,destroy:function(){i.remove(),Promise.resolve().then((function(){return c.unmount()})),t.removeEventListener("mousemove",a),t.removeEventListener("mouseleave",s)}},b({left:e.clientX,top:e.clientY})}})),E=(0,c.Z)((function(e){var t=e.currentTarget;F(e,t)})),R=(0,c.Z)((function(e){var t,n=e.target;(null!==(t=null==d?void 0:d(n))&&void 0!==t?t:e.currentTarget===n)&&F(e,n)}));return(0,s.useLayoutEffect)((function(){return N}),[]),(0,s.useLayoutEffect)((function(){!function(){if(x.current&&S){var e=x.current,t=e.reactRoot,r=e.container;r.style.zIndex="".concat(n),t.render((0,g.jsx)(f.a,{i18n:C,children:(0,g.jsx)(_,{ref:Z,tooltipProps:(0,i.Z)((0,i.Z)({},v),{},{content:j()}),getPopupContainer:function(){return r},onClosePopover:I,position:S,cursor:u})}))}}()})),{handleMouseEnter:E,handleMouseOver:R}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getEllipsisDOM,n=void 0===t?function(e){return e}:t,a=e.content,s=void 0===a?function(e){return e.target.textContent}:a,o=(0,r.Z)(e,x);return Z((0,i.Z)((0,i.Z)({},o),{},{getEllipsisDOM:n,content:s}))}},42677:function(e,t,n){n.d(t,{a:function(){return l}});var r=n(50959),i=n(84875),a=n.n(i),s=n(96682),o=n(71514),c=n(11527),l=(0,r.memo)((function(e){var t=e.className,n=e.size,r=e.circleColor,i=void 0===r?"black-4":r,l=e.arcColor,u=void 0===l?"white-0":l,d=e.animated,p=void 0===d||d,f=function(e){return e.startsWith("#")||e.startsWith("rgb")?e:"var(--heycan-pro-".concat(e,")")};return(0,c.jsx)(s.r,{className:a()(t,o.Z.root,p&&o.Z.animated),width:n,height:n,style:{"--heycan-pro-loading-circle-color":f(i),"--heycan-pro-loading-arc-color":f(u)}})}))},88842:function(e,t,n){n.d(t,{t:function(){return d}});var r,i=n(84875),a=n.n(i),s=n(50959);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var c=function(e){return s.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:34,height:28,fill:"none",viewBox:"0 0 34 28"},e),r||(r=s.createElement("path",{fill:"#fff",fillOpacity:.09,d:"M33.71 6.32V1.11l-6.268 3.291v-.196c0-2.076-1.489-3.33-3.643-3.33H3.935C1.662.875.292 2.129.292 4.205v5.25L9.067 14 .291 18.584v5.25c0 2.037 1.371 3.291 3.643 3.291H23.8c2.154 0 3.643-1.254 3.643-3.291v-.274l6.269 3.33V21.6L19.136 14l14.575-7.68ZM14.083 16.587l10.774 5.642H3.27l10.813-5.642ZM24.778 5.773l-10.695 5.602L3.268 5.773h21.51Z"})))},l="I5KeT",u=n(11527),d=function(e){var t=e.className,n=e.iconWidth,r=Math.round(.785*n);return(0,u.jsx)("div",{className:a()(t,l),children:(0,u.jsx)(c,{height:r,width:n})})}},23826:function(e,t,n){n.d(t,{V:function(){return W}});var r,i,a,s,o,c,l,u,d,p,f,m,v,h=n(49919),g=n(29922),k=n(17576),x=n(50959),_=n(78979),Z=n(47071),w=n(78794),y=n(84875),S=n.n(y),b=n(58216),C=n(21571),j=n(24738),I=function(e){return e[e.Deleted=22]="Deleted",e[e.Offline=23]="Offline",e[e.Banned=25]="Banned",e[e.Online=102]="Online",e[e.Reviewing=141]="Reviewing",e[e.SelfView=144]="SelfView",e[e.HomepageOnline=103]="HomepageOnline",e}({}),N=function(e){return e[e.Unknown=0]="Unknown",e[e.WaitReview=1]="WaitReview",e[e.RiskReviewing=2]="RiskReviewing",e[e.QualityReviewing=3]="QualityReviewing",e[e.RiskReviewFailed=4]="RiskReviewFailed",e[e.QualityReviewFailed=5]="QualityReviewFailed",e[e.CopyrightReviewing=6]="CopyrightReviewing",e[e.CopyrightReviewFailed=7]="CopyrightReviewFailed",e[e.Passed=100]="Passed",e}({}),F=C.oc.t,E=function(e){return e.all="all",e.paster="paster",e.wordart="wordart",e.soundEffect="soundEffect",e.textTemplate="textTemplate",e.video="video",e.stickerFramePack="sticker_frame_zip",e.emoticons="emoticons",e.formula="formula",e.filter="filter",e.filterCollection="filter_collection",e.stickerCollection="sticker_collection",e}({}),R=function(e){return e[e.all=0]="all",e[e.wordart=1]="wordart",e[e.paster=2]="paster",e[e.soundEffect=3]="soundEffect",e[e.video=4]="video",e[e.Song=5]="Song",e[e.TextTemplate=6]="TextTemplate",e[e.Special=7]="Special",e[e.FaceSpecial=8]="FaceSpecial",e[e.Image=9]="Image",e[e.Filter=12]="Filter",e[e.StickerCollection=102]="StickerCollection",e[e.FilterCollection=112]="FilterCollection",e[e.emoticons=105]="emoticons",e[e.stickerFramePack=1e3]="stickerFramePack",e[e.formula=50]="formula",e}({}),L=(r={},(0,b.Z)(r,j.qG.TextTpl,F("text_template")),(0,b.Z)(r,j.qG.Sticker,F("sticker")),(0,b.Z)(r,j.qG.WordArt,F("flower_character")),i={},(0,b.Z)(i,R.paster,F("original_stickers_web")),(0,b.Z)(i,R.TextTemplate,F("original_text_template")),(0,b.Z)(i,R.wordart,F("original_cursive")),i),T=(a={},(0,b.Z)(a,R.all,E.all),(0,b.Z)(a,R.paster,E.paster),(0,b.Z)(a,R.wordart,E.wordart),(0,b.Z)(a,R.soundEffect,E.soundEffect),(0,b.Z)(a,R.video,E.video),(0,b.Z)(a,R.emoticons,E.emoticons),(0,b.Z)(a,R.formula,E.formula),(0,b.Z)(a,R.Filter,E.filter),(0,b.Z)(a,R.FilterCollection,E.filterCollection),(0,b.Z)(a,R.TextTemplate,E.textTemplate),(0,b.Z)(a,R.StickerCollection,E.stickerCollection),s={},(0,b.Z)(s,E.wordart,R.wordart),(0,b.Z)(s,E.paster,R.paster),(0,b.Z)(s,E.soundEffect,R.soundEffect),(0,b.Z)(s,E.video,R.video),(0,b.Z)(s,E.emoticons,R.emoticons),(0,b.Z)(s,E.formula,R.formula),(0,b.Z)(s,E.filter,R.Filter),(0,b.Z)(s,E.filterCollection,R.FilterCollection),(0,b.Z)(s,E.textTemplate,R.TextTemplate),(0,b.Z)(s,E.stickerCollection,R.StickerCollection),o={mix:"\u5168\u90e8"},(0,b.Z)(o,E.all,"\u7cbe\u9009"),(0,b.Z)(o,E.paster,"\u8d34\u7eb8"),(0,b.Z)(o,E.wordart,"\u82b1\u5b57"),(0,b.Z)(o,E.soundEffect,"\u97f3\u6548"),(0,b.Z)(o,E.video,"\u89c6\u9891"),(0,b.Z)(o,E.emoticons,"\u7cfb\u5217\u8868\u60c5"),(0,b.Z)(o,E.formula,"\u7d20\u6750\u5305"),c={},(0,b.Z)(c,R.paster,"sticker"),(0,b.Z)(c,R.StickerCollection,"sticker_collection"),(0,b.Z)(c,R.wordart,"wordart"),(0,b.Z)(c,R.soundEffect,"audio"),(0,b.Z)(c,R.video,"video"),(0,b.Z)(c,R.stickerFramePack,"sticker_frame_zip"),(0,b.Z)(c,R.emoticons,"emotion"),(0,b.Z)(c,R.formula,"formula"),(0,b.Z)(c,R.Image,"image"),(0,b.Z)(c,R.Special,"special_effect"),(0,b.Z)(c,R.FaceSpecial,"face_props"),(0,b.Z)(c,R.TextTemplate,"text_template"),(0,b.Z)(c,R.Filter,"filter"),(0,b.Z)(c,R.FilterCollection,"filter_collection"),l={},(0,b.Z)(l,R.paster,"sticker_zip"),(0,b.Z)(l,R.wordart,"wordart_zip"),(0,b.Z)(l,R.soundEffect,"audio_zip"),(0,b.Z)(l,R.video,"video_zip"),(0,b.Z)(l,R.emoticons,"emoticons_zip"),(0,b.Z)(l,R.TextTemplate,"text_template_zip"),function(e){return e[e.default=0]="default",e[e.latest=1]="latest",e[e.hotest=2]="hotest",e}({})),P=(u={},(0,b.Z)(u,T.default,"recommend"),(0,b.Z)(u,T.latest,"by_newest"),(0,b.Z)(u,T.hotest,"by_hottest"),R.all,R.paster,R.video,R.soundEffect,R.wordart,I.Offline,I.Online,I.HomepageOnline,(0,b.Z)({},I.HomepageOnline,[N.Passed]),N.Passed,I.Reviewing,I.SelfView,I.HomepageOnline,d={},(0,b.Z)(d,I.SelfView,[N.WaitReview,N.RiskReviewing,N.QualityReviewing,N.CopyrightReviewing]),(0,b.Z)(d,I.HomepageOnline,[N.WaitReview,N.RiskReviewing,N.QualityReviewing,N.CopyrightReviewing]),N.WaitReview,N.RiskReviewing,N.QualityReviewing,N.CopyrightReviewing,I.HomepageOnline,I.SelfView,I.Banned,p={},(0,b.Z)(p,I.HomepageOnline,[N.Unknown,N.RiskReviewFailed,N.QualityReviewFailed,N.CopyrightReviewFailed]),(0,b.Z)(p,I.SelfView,[N.Unknown,N.RiskReviewFailed,N.QualityReviewFailed,N.CopyrightReviewFailed,N.Passed]),N.Unknown,N.RiskReviewFailed,N.QualityReviewFailed,N.CopyrightReviewFailed,f={},(0,b.Z)(f,I.HomepageOnline,[N.QualityReviewFailed,N.CopyrightReviewFailed]),(0,b.Z)(f,I.SelfView,[N.QualityReviewFailed,N.CopyrightReviewFailed,N.Passed]),function(e){return e[e.Douyin=0]="Douyin",e[e.Heycon=1]="Heycon",e[e.VideoCut=2]="VideoCut",e[e.WebVideoCut=3]="WebVideoCut",e[e.Ulike=4]="Ulike",e[e.Effect=5]="Effect",e}({})),U=(m={},(0,b.Z)(m,P.Douyin,"\u6296\u97f3"),(0,b.Z)(m,P.Heycon,"\u9ed1\u7f50\u5934"),(0,b.Z)(m,P.VideoCut,"\u526a\u6620"),(0,b.Z)(m,P.WebVideoCut,"\u526a\u6620\u7f51\u9875\u7248"),(0,b.Z)(m,P.Ulike,"\u8f7b\u989c"),(0,b.Z)(m,P.Effect,"\u65b0\u7279\u6548\u5de5\u5177"),P.Douyin,P.Heycon,P.VideoCut,P.WebVideoCut,P.Ulike,P.Effect,v={},(0,b.Z)(v,P.Douyin,5),(0,b.Z)(v,P.Heycon,1),(0,b.Z)(v,P.VideoCut,2),(0,b.Z)(v,P.WebVideoCut,6),(0,b.Z)(v,P.Ulike,3),(0,b.Z)(v,P.Effect,4),n(84449)),q=n(55234),O=n(30109),D="sSvgw",A="ki3E1",M="wfojK",z=n(11527),B=["value","onChange"],H=function(e){var t=e.value,n=e.onChange,r=(0,k.Z)(e,B),i=(0,x.useState)([]),a=(0,g.Z)(i,2),s=a[0],o=a[1],c=(0,w.$)().t,l=e.itemType,u=e.className,d=e.checkboxCls,p=(0,q.ZP)(q.Qt.UseHasAgree,U.$.userInfo.uid),f=p.get,m=p.set,v=(0,O.ZP)({handleBtnText:c("pc_i_see_web"),needReview:!1,protocol:O.YW.Origin,onOk:function(){if(U.$.userInfo.uid){m("add",[O.YW.Origin]);var e=f();o(e)}}}).showModal;return(0,x.useEffect)((function(){if(U.$.userInfo.uid){var e=f();o(e)}}),[U.$.userInfo.uid]),(0,z.jsx)("div",{className:S()([D,u]),children:(0,z.jsxs)("div",{className:A,children:[(0,z.jsx)(_.XZ,(0,h.Z)((0,h.Z)({},r),{},{checked:t,className:d,onChange:function(e){e.target.checked&&(s.includes(O.YW.Origin)||v()),null==n||n(e.target.checked)},children:L[l]})),(0,z.jsx)(Z.qwp,{size:"small",className:M,onClick:v})]})})},W=(0,_.Q2)(H)},20014:function(e,t,n){n.d(t,{D:function(){return k}});var r=n(17576),i=n(49919),a=n(29922),s=n(50959),o=n(44478),c=n(82242),l=n(84875),u=n.n(l),d=n(78979),p=n(78794),f=n(37206),m={root:"qThJ3",point:"ytHHV",clearDefaultMenuStyle:"yBFsG"},v=n(11527),h=["zIndex"],g=function(e){var t=e.position,n=e.getPopupContainer,r=e.onClosePopover,o=e.popoverProps,l=(0,s.useState)(!0),p=(0,a.Z)(l,2),f=p[0],h=p[1],g=(0,c.Z)((function(){return h(!1)})),k=(0,s.useRef)(null);return(0,s.useLayoutEffect)((function(){var e;null===(e=k.current)||void 0===e||e.focus()}),[]),(0,v.jsx)(d.J2,(0,i.Z)((0,i.Z)({autoAdjustOverflow:!0,position:"bottomLeft",clickToHide:!0},o),{},{className:u()(o.className,m.clearDefaultMenuStyle),trigger:"custom",visible:f,onEscKeyDown:g,onClickOutSide:g,getPopupContainer:n,onVisibleChange:function(e){var t;!e&&r(),null===(t=o.onVisibleChange)||void 0===t||t.call(o,e)},children:(0,v.jsx)("div",{className:m.point,tabIndex:-1,ref:k,style:(0,i.Z)({},t)})}))};function k(e){var t=e.zIndex,n=void 0===t?1e3:t,i=(0,r.Z)(e,h),l=(0,s.useState)(null),u=(0,a.Z)(l,2),d=u[0],k=u[1],x=(0,s.useState)(null),_=(0,a.Z)(x,2),Z=_[0],w=_[1],y=(0,p.$)().i18n,S=(0,c.Z)((function(){d&&(d.destroy(),k(null),w(null))})),b=(0,c.Z)((function(){null==d||d.destroy()})),C=(0,c.Z)((function(e){if(!d){var t=document.createElement("div");t.className=m.root,t.style.zIndex="".concat(n);t.addEventListener("wheel",(function(e){e.currentTarget===t&&(e.preventDefault(),e.stopPropagation())}),!1),window.addEventListener("resize",S),document.body.appendChild(t);var r=(0,o.createRoot)(t);k({container:t,reactRoot:r,destroy:function(){t.remove(),Promise.resolve().then((function(){return r.unmount()})),window.removeEventListener("resize",S)}}),w(e)}})),j=(0,c.Z)((function(e){e.preventDefault(),e.stopPropagation(),C({left:e.clientX,top:e.clientY})}));return(0,s.useLayoutEffect)((function(){return b}),[]),(0,s.useLayoutEffect)((function(){d&&Z&&d.reactRoot.render((0,v.jsx)(f.a,{i18n:y,children:(0,v.jsx)(g,{popoverProps:i,getPopupContainer:function(){return d.container},onClosePopover:S,position:Z})})),d&&(d.container.style.zIndex="".concat(n))})),{handleContextMenu:j}}},93001:function(e,t,n){n.d(t,{m:function(){return a}});var r={menu:"v4m02",menuItemContainer:"K5Een",menuItem:"eU7bu"},i=n(11527);function a(e){var t=e.items,n=function(e){e.currentTarget===e.target&&e.stopPropagation()};return(0,i.jsx)("div",{className:r.menu,onClick:n,children:(0,i.jsx)("div",{className:r.menuItemContainer,onClick:n,children:t.map((function(e,t){var n=e.key;return(0,e.render)({key:n,index:t,className:r.menuItem})}))})})}},30109:function(e,t,n){n.d(t,{YW:function(){return h},rr:function(){return k}});var r,i,a=n(49919),s=n(29922),o=n(58216),c=n(50959),l=n(21571),u=n(78979),d=n(47071),p=n(24166),f=n(55785),m=n(99137),v=n(11527),h=function(e){return e.Origin="originUserAuthProtocol",e.Creator="createProtocol",e}({}),g=(r={},(0,o.Z)(r,h.Origin,(0,f.O)()),(0,o.Z)(r,h.Creator,(0,f.d)()),r),k=(i={},(0,o.Z)(i,h.Origin,l.oc.t("pc_sticker_original_notice_web")),(0,o.Z)(i,h.Creator,l.oc.t("pc_capcut_creator_agreement_web")),i),x=function(e){var t,n=e.onCancel,r=e.onOk,i=e.protocol,a=e.handleBtnText,o=e.closeIcon,f=void 0!==o&&o,h=e.needReview,x=void 0===h||h,_=(0,c.useState)(!x),Z=(0,s.Z)(_,2),w=Z[0],y=Z[1],S=function(){w&&(null==r||r())};return(0,c.useEffect)((function(){var e=function(e){try{var t=JSON.parse(e.data);"protocal"===t.from&&"bottom"===t.event&&y(!0)}catch(n){console.log(n),(0,p.Z)("captureException",n),y(!0)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]),(0,v.jsxs)("div",{className:m.Z.Protoal,children:[(0,v.jsx)("div",{className:m.Z.title,children:k[i]}),f&&(0,v.jsx)(u.zx,{icon:(0,v.jsx)(d.LmC,{}),style:{position:"absolute",color:"var(--color-disabled-bg)",right:12,top:20},theme:"borderless",onClick:function(){null==n||n("close")}}),(0,v.jsx)("div",{className:m.Z.content,children:(0,v.jsx)("iframe",{id:"frame",src:g[i]})}),(t=a,t?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{className:m.Z.tips,children:w?null:(0,v.jsx)("span",{children:l.oc.t("pc_stickers_toast_view_copyright_web")})}),(0,v.jsx)("div",{className:m.Z.footer,children:(0,v.jsx)(u.zx,{className:m.Z.btn,type:"primary",theme:"solid",disabled:!w,onClick:S,children:t})})]}):null)]})};t.ZP=function(e){var t=e.onCancel,n=e.onOk,r=(0,c.useState)(!1),i=(0,s.Z)(r,2),o=i[0],l=i[1],d=(0,c.useRef)({}),p=function(e){null==t||t(e),l(!1)},f=function(){null==n||n(),l(!1)};return(0,c.useEffect)((function(){var t,n,r;o?(r=u.u_.info({width:376,height:564,maskClosable:!1,header:null,title:null,className:m.Z.modal,content:(0,v.jsx)(x,(0,a.Z)((0,a.Z)({},e),{},{onCancel:p,onOk:f})),footer:null}).destroy,d.current.destroy=r):null==d||null===(t=d.current)||void 0===t||null===(n=t.destroy)||void 0===n||n.call(t)}),[o]),{visible:o,showModal:function(){return l(!0)}}}},43637:function(e,t,n){n.d(t,{u:function(){return q}});var r=n(3972),i=n(43941),a=n(66097),s=n(29922),o=n(50959),c=n(78979),l=n(82242),u=n(15547),d=n(78794),p=n(21551),f=n(87367),m=n(84449),v=n(55234),h=n(86094),g=n(67407),k=n(7723),x=n(84875),_=n.n(x),Z=n(58216),w="ZaY7Y",y="umR1V",S=n(11527),b=function(e){var t=e.className,n=e.value,r=e.selected,i=e.onClick;return(0,S.jsx)(c.Vp,{className:_()([t,w,(0,Z.Z)({},y,r)]),color:r?"cyan":void 0,onClick:function(){return null==i?void 0:i(n)},children:n},n)},C="smxie",j="aqS4C",I="IyBLd",N="QuFv_",F="ukrQO",E=function(e){var t=e.className,n=e.title,r=e.loading,i=e.loadingText,a=e.value,s=e.options,l=e.onSelect,u=(0,o.useCallback)((function(e){return a.includes(e)}),[a]),d=(0,o.useMemo)((function(){return s.filter((function(e){return!a.includes(e)}))}),[a,s]);return(0,S.jsxs)("div",{className:_()([C,t]),children:[(0,S.jsx)("p",{className:j,children:n}),(0,S.jsx)("div",{className:I,children:r?(0,S.jsxs)("div",{className:N,children:[(0,S.jsx)("span",{className:F,children:i}),(0,S.jsx)(c.yC,{size:"small"})]}):d.map((function(e){return(0,S.jsx)(b,{selected:u(e),value:e,onClick:function(){return l(e)}},e)}))})]})},R=(0,p.Pi)((function(e){var t=e.value,n=e.onSelect,r=(0,o.useState)([]),i=(0,s.Z)(r,2),a=i[0],c=i[1],l=(0,v.ZP)(v.Qt.TagEachUser,m.$.userInfo.uid).get,u=(0,d.$)().t;return(0,o.useEffect)((function(){var e=l();c(e)}),[m.$.userInfo.uid]),(0,S.jsx)(E,{title:u("pc_recently_used_web"),value:t,options:a,onSelect:n})})),L=((0,p.Pi)((function(e){var t=e.title,n=e.uri,c=e.value,p=e.itemType,m=e.onSelect,v=(0,o.useState)([]),h=(0,s.Z)(v,2),g=h[0],k=h[1],x=(0,o.useState)([]),_=(0,s.Z)(x,2),Z=_[0],w=_[1],y=(0,o.useState)(!1),b=(0,s.Z)(y,2),C=b[0],j=b[1],I=(0,o.useRef)({}),N=(0,d.$)().t,F=(0,o.useMemo)((function(){return[].concat((0,r.Z)(Z),(0,r.Z)(g))}),[g,Z]),R=(0,l.Z)((function(e){var t=e.title,n=e.uri;return t?I.current.cvid&&I.current.uri===n?{cvid:I.current.cvid,title:t}:n?{image_uri:n,title:t}:null:null})),L=(0,o.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),r=R({title:t,uri:n}),e.next=5,Promise.all([r&&(0,f.Uz)(r).then((function(e){w(e.cv_tags),I.current.cvid=e.cvid,r.image_uri&&(I.current.uri=r.image_uri)})),!I.current.selfConfigTagsReady&&(0,f.On)({effect_type:p}).then((function(e){k(e.rec_tags),I.current.selfConfigTagsReady=!0}))]);case 5:return e.prev=5,j(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])}))),[t,n,p]);return(0,u.Z)(L,500,[L]),(0,o.useEffect)((function(){L()}),[]),(0,S.jsx)(E,{title:N("recommend_signature_web"),loading:C,loadingText:N("loading_web"),value:c,options:F,onSelect:m})})),"KEPqc"),T="bpnHu",P="fV0lM",U=(0,p.Pi)((function(e){e.recommendConfig;var t=e.value,n=e.itemType,p=(e.disableRecommend,e.disableLatest),x=e.onChange,_=e.placeholder,Z=e.max,w=void 0===Z?15:Z,y=(0,o.useMemo)((function(){return t||[]}),[t]),C=(0,o.useState)(""),j=(0,s.Z)(C,2),I=j[0],N=j[1],F=(0,o.useState)([]),E=(0,s.Z)(F,2),U=E[0],q=E[1],O=(0,o.useState)([]),D=(0,s.Z)(O,2),A=D[0],M=D[1],z=(0,d.$)().t,B=(0,v.ZP)(v.Qt.TagEachUser,m.$.userInfo.uid).set,H=(0,l.Z)((function(e){M(I?e:[])}));(0,u.Z)((0,a.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&I){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,f.je)({query:I,count:10,effect_type:n});case 4:t=e.sent,r=((null==t?void 0:t.sug_words)||[]).map((function(e){return e.words})),H(r);case 7:case"end":return e.stop()}}),e)}))),500,[I,n]),(0,o.useEffect)((function(){I||M([])}),[I]);var W=(0,o.useCallback)((function(e){if(w&&e.length>w)return c.FN.error(z("pc_stickers_release_max_tag_web",{X:w})),void(null==x||x(e.slice(0,w)));null==x||x(e)}),[x]),V=(0,l.Z)((function(e){y.includes(e)||W([].concat((0,r.Z)(y),[e]))})),G=(0,o.useMemo)((function(){return new g.l}),[]),Q=(0,l.Z)(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.lock("",(0,a.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.includes(t)){e.next=2;break}return e.abrupt("return",!0);case 2:return n=!1,e.prev=3,e.next=6,(0,f._K)({words:t,scene:f.Xb.Tag});case 6:r=e.sent,n=!1===(null==r?void 0:r.is_hit),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),(0,k.RF)("[TagSelect] call checkAntiDirt failed",e.t0,{tag:t}),c.FN.error(z("pc_tag_retry_web")),e.abrupt("return",!1);case 15:if(!n){e.next=18;break}return V(t),e.abrupt("return",!0);case 18:return(0,k.c6)("[TagSelect] checkAntiDirt not passed",{tag:t}),c.FN.error(z("pc_tag_illegal_fail_web")),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[3,10]])}))));case 2:return n=e.sent,e.abrupt("return",null!=n&&n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=(0,l.Z)((function(e){if(0!==e.length){var t=y.filter((function(t){return!e.includes(t)}));W(t)}})),Y=function(e){(0,h.O1)(e)<=30&&N(e)},K=(0,l.Z)((function(e){Y(""),y.includes(e)?X([e]):V(e)})),$=function(e){var t=U.includes(e);q(t?U.filter((function(t){return t!==e})):[].concat((0,r.Z)(U),[e]))},J=(0,l.Z)((function(){X(U),q([])}));(0,o.useEffect)((function(){var e=function(e){"Delete"!==e.code&&"Backspace"!==e.code||J()};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[]);var ee=(0,l.Z)((function(e){e===I&&Y("")})),te=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.Z)(t,1),r=n[0],Promise.resolve().then((function(){return Y(I)})),e.next=4,Q(r);case 4:e.sent&&(B("add",[r]),ee(I));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.replace(/ {1,}$/,""),Y(n),n!==t&&n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Q(n);case 6:e.sent&&(B("add",[n]),ee(I));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsxs)("div",{className:L,children:[(0,S.jsx)(c.Lt,{position:"bottomLeft",trigger:"focus",className:P,style:{maxHeight:200,overflow:"scroll"},render:(0,S.jsx)(c.Lt.Menu,{children:A.map((function(e){return(0,S.jsx)(c.Lt.Item,{className:T,onClick:function(){return K(e)},children:e},e)}))}),children:(0,S.jsx)(c.EG,{inputValue:I,onInputChange:ne,value:t,placeholder:_,renderTagItem:function(e,t,n){return(0,S.jsx)(b,{value:e,selected:U.includes(e),onClick:$},e)},onAdd:te,onRemove:J})}),!1,!p&&(0,S.jsx)(R,{value:y,onSelect:K})]})})),q=(0,c.Q2)(U)},36004:function(e,t,n){n.d(t,{l:function(){return h}});var r=n(49919),i=n(17576),a=n(29922),s=n(50959),o=n(84875),c=n.n(o),l=n(78979),u=n(67819),d="LCPYT",p="Oq0D5",f=n(11527),m=["isCanEnter","value"],v=function(e){var t=(0,s.useRef)(!1),n=(0,s.useState)(""),o=(0,a.Z)(n,2),v=o[0],h=o[1],g=e.isCanEnter,k=void 0===g||g,x=e.value,_=(0,i.Z)(e,m),Z=_.className,w=_.id,y=_.placeholder,S=_.maxLength,b=_.onCompositionEnd,C=_.onCompositionStart,j=t.current?v:x,I=_.onChange,N=(0,s.useCallback)((function(e){var t=e||"";return k?t:t.replace(/\n/g,"")}),[k]),F=(0,s.useCallback)((function(e){var t=N(e);return void 0!==S?(0,u.a)(t,S):t}),[N,S]),E=(0,s.useCallback)((function(e){t.current=!0,null==C||C(e)}),[C]),R=(0,s.useCallback)((function(e){t.current=!1,null==b||b(e);var n=F(e.currentTarget.value);h(n),I(n)}),[b,I,F]),L=(0,s.useCallback)((function(e){var n=N(e);if(t.current)h(n);else if(void 0!==S){var r=F(n);I(r)}else I(n)}),[I,N,F]),T=(0,l.tL)(w).error;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Kx,(0,r.Z)((0,r.Z)({},_),{},{value:j,className:c()(Z,d),autoComplete:"off",maxLength:void 0,autosize:!0,rows:1,placeholder:y,onChange:L,onCompositionStart:E,onCompositionEnd:R})),T&&(0,f.jsxs)("div",{className:p,children:["*",T]})]})},h=(0,l.Q2)(v)},55785:function(e,t,n){n.d(t,{O:function(){return i},d:function(){return r}});var r=function(e){switch(e){case"tr-TR":return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_tr-TR.html?theme=lv_material_pc_front";case"ko-KR":return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_ko-KR.html?theme=lv_material_pc_front";default:return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/capcut/new_via_clause_creator_agreement_en.html?theme=lv_material_pc_front"}},i=function(){return"https://sf16-draftcdn-sg.ibytedtos.com/obj/ies-hotsoon-draft-sg/faceu/db84e32a-66a5-425a-afb2-0f32186f3cce_en.html"}},44975:function(e,t,n){n.d(t,{P:function(){return Z}});var r=n(43941),i=n(66097),a=n(84875),s=n.n(a),o=n(78979),c=n(82242),l=n(78794),u=n(97545),d=n(36928),p=n(30109),f="tY3T0",m="kW4k7",v="AYMpO",h="ps6Ws",g="WE8wM",k="DxAtd",x="zkIZd",_=n(11527),Z=function(e){var t=(0,l.$)().t,n=e.className,a=e.leftText,Z=e.isPublishDisabled,w=e.isPublishing,y=e.needConfirmModalOnClose,S=e.onPublish,b=(0,c.Z)((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=6;break}return e.next=3,d.Z.warn({mainText:t("pc_sticker_cancel_web"),subText:t("pc_sticker_click_unrecoverable_web"),confirmBtnText:t("pc_stickers_release_confirm_quit_web"),cancelBtnText:t("pc_stickers_release_cancel_web")});case 3:if(e.sent===d.L.Confirm){e.next=6;break}return e.abrupt("return");case 6:(0,u.Nt)();case 7:case"end":return e.stop()}}),e)}))));return(0,_.jsxs)("div",{className:s()(n,f),children:[(0,_.jsx)("div",{className:m,onClick:undefined,children:a}),(0,_.jsxs)("div",{className:v,children:[(0,_.jsx)("span",{className:h,children:t("pc_sticker_release_agree_{X}_web",{X:(0,_.jsx)("span",{className:g,children:p.rr[p.YW.Creator]},"protocol")})}),(0,_.jsxs)("div",{className:k,children:[(0,_.jsx)(o.zx,{className:x,type:"primary",theme:"solid",disabled:Z,loading:w,onClick:S,children:t("pc_stickers_release_web")}),(0,_.jsx)(o.zx,{className:x,type:"secondary",theme:"solid",onClick:b,children:t("pc_stickers_release_cancel_web")})]})]})]})}},66923:function(e,t,n){n.d(t,{ZP:function(){return F}});var r=n(58216),i=n(29922),a=n(49919),s=n(50959),o=n(84875),c=n.n(o),l=n(78979),u=n(47071),d=n(21571),p=n(78794),f=n(3088),m="p5SkZ",v="eAGaJ",h="S1Lhb",g="IQ7IL",k="u1PTL",x="DXKQP",_="Shh3P",Z="CgLeU",w="wGdLj",y="pXu1G",S="QQ66R",b="Kdr3W",C="er0kY",j="zolvY",I=n(11527),N=[{value:!0,label:d.oc.t("pc_stickers_release_cycle_start_web")},{value:!1,label:d.oc.t("pc_stickers_release_one_start_web")}],F=function(e){var t=e.className,n=e.prefix,o=e.onStartEdit,d=e.onSave,F=e.showGlobalSetting,E=(0,l.XQ)(),R=(0,l.tL)(n).value,L=(0,s.useMemo)((function(){return(0,a.Z)({fps:0,loop:!1,sequenceSettingsApplyToAll:!1},R)}),[null==R?void 0:R.fps,null==R?void 0:R.loop,null==R?void 0:R.sequenceSettingsApplyToAll]),T=(0,s.useState)(!1),P=(0,i.Z)(T,2),U=P[0],q=P[1],O=(0,s.useState)(!1),D=(0,i.Z)(O,2),A=D[0],M=D[1],z=(0,s.useRef)(L),B=(0,p.$)().t,H=(0,s.useMemo)((function(){return function(){for(var e=[],t=1;t<=49;t++)e.push({label:"".concat(t," FPS"),value:t});return e}()}),[]),W=(0,s.useMemo)((function(){return U?B("pc_stickers_release_animation_set_web"):"".concat(B("pc_stickers_release_sfps_web",{X:L.fps,Y:L.loop?B("pc_stickers_release_cycle_start_web"):B("pc_stickers_release_one_start_web")}))}),[L,U]),V=(0,f.S)({checkIsTarget:function(e){return null!==e.closest(".semi-form-field-label-text, .semi-radio-addon, .semi-checkbox-addon")}}).handleMouseOver;return(0,I.jsxs)("div",{className:c()(t,m,(0,r.Z)({},S,U)),children:[(0,I.jsxs)("div",{className:v,children:[(0,I.jsx)("div",{className:h,children:W}),(0,I.jsx)("div",{className:g,children:U?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:k,onClick:function(){E.setValues((0,r.Z)({},n,(0,a.Z)((0,a.Z)({},R),z.current))),q(!1)},children:B("pc_stickers_release_cancel_web")}),(0,I.jsx)("span",{className:x,onClick:function(){q(!1),d()},children:B("pc_stickers_release_saved_web")})]}):(0,I.jsx)("span",{className:x,onClick:function(){z.current=L,q(!0),o()},children:B("pc_sticker_edit_web")})})]}),(0,I.jsxs)("div",{className:_,onMouseOver:V,children:[(0,I.jsx)(l.l0.Select,{labelPosition:"left",field:"".concat(n,".fps"),label:B("pc_stickers_release_fps_web"),size:"small",fieldClassName:Z,className:w,optionList:H,arrowIcon:A?(0,I.jsx)(u.y_Q,{}):(0,I.jsx)(u.C26,{}),onDropdownVisibleChange:M}),(0,I.jsx)(l.l0.RadioGroup,{className:y,direction:"vertical",labelPosition:"left",field:"".concat(n,".loop"),label:B("pc_stickers_release_cycle_set_web"),options:N}),(0,I.jsx)("div",{className:b,hidden:!F,children:(0,I.jsx)(l.l0.Checkbox,{labelPosition:"left",field:"".concat(n,".sequenceSettingsApplyToAll"),fieldClassName:C,className:j,label:B("pc_stickers_release_settings_web_web"),children:B("pc_stickers_release_apply_all_frames_web")})})]})]})}},27262:function(e,t,n){n.d(t,{$:function(){return E}});var r,i,a=n(49919),s=n(17576),o=n(84875),c=n.n(o),l=n(21551),u=n(78979),d=n(78794),p=n(42677),f="f4fcS",m="RGDuH",v=n(11527),h=function(e){var t=e.className,n=e.status,r=e.children;return(0,v.jsxs)("div",{className:c()(t,f),children:["loading"===n?(0,v.jsx)(p.a,{size:18},n):(0,v.jsx)(p.a,{size:18,circleColor:"#c30000",animated:!1},n),(0,v.jsx)("div",{className:m,children:r})]})},g=n(29922),k=n(50959);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}var _=function(e){return k.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30"},e),r||(r=k.createElement("rect",{width:30,height:30,fill:"#00C1CD",rx:15})),i||(i=k.createElement("path",{stroke:"#FAFAFA",strokeLinecap:"square",strokeWidth:1.875,d:"M9.001 15h12M15.001 21.001v-12"})))},Z=n(3088),w={root:"Vj3Ha","root--small":"Eom9S",rootSmall:"Eom9S",disabled:"BWrj2",box:"u5leO",dragging:"iJ7xG",largeBox:"axwxG",addIcon:"RjQ7v",titleContainer:"CxS8U",title:"oyRZO",subTitle:"grukY",smallBox:"A2441"},y=function(e){var t=e.className,n=e.size,r=e.title,i=e.draggingTitle,a=e.subTitle,s=e.disabled,o=e.disabledTooltip,l=e.onDrop,u=e.onClick,p=(0,k.useState)(!1),f=(0,g.Z)(p,2),m=f[0],h=f[1],x=((0,d.$)().t,m?i:r),y=(0,Z.w)({content:o,cursor:"not-allowed"}).handleMouseEnter,S=function(e){return function(t){s||(t.preventDefault(),t.stopPropagation(),null==e||e(t))}};return(0,v.jsx)("div",{className:c()(t,w.root,w["root--".concat(n)],s&&w.disabled,m&&w.dragging),onDragEnter:S((function(){return!m&&h(!0)})),onDragOver:S(),onDragLeave:S((function(e){e.currentTarget===e.target&&m&&h(!1)})),onDrop:S((function(e){h(!1),l(e)})),onMouseEnter:s?y:void 0,children:"large"===n?(0,v.jsxs)("div",{className:c()(w.box,w.largeBox),onClick:s?void 0:u,children:[(0,v.jsx)(_,{className:w.addIcon}),(0,v.jsxs)("div",{className:w.titleContainer,children:[(0,v.jsx)("div",{className:w.title,children:x}),(0,v.jsx)("div",{className:w.subTitle,children:a})]})]}):(0,v.jsxs)("div",{className:c()(w.box,w.smallBox),onClick:s?void 0:u,children:[(0,v.jsx)(_,{className:w.addIcon}),(0,v.jsx)("span",{className:w.title,children:x})]})})},S="aRbvD",b="Xb4Gy",C="Ab7BE",j="fuvGF",I="HLdIB",N="N2AJy",F=["titleForUploadArea","titleForMainForm"],E=(0,l.Pi)((function(e){var t=e.className,n=e.layout,r=e.setFormApi,i=e.renderStickerArea,o=e.renderFormArea,l=e.onRetry,p=e.scrollAreaRef,f=e.uploadAreaProps,m=f.titleForUploadArea,g=f.titleForMainForm,k=(0,s.Z)(f,F),x=(0,d.$)().t;return(0,v.jsx)(u.l0,{className:c()(t,S),getFormApi:r,children:"loading"===n?(0,v.jsx)(h,{status:"loading",children:x("pc_sticker_release_loading_web")}):"error"===n?(0,v.jsx)(h,{status:"error",children:x("pc_sticker_abnormal_{X}_web",{X:(0,v.jsx)("span",{className:C,onClick:l,children:x("pc_sticker_retry_web")},"X")})}):"mainForm"===n?(0,v.jsxs)("div",{className:j,children:[(0,v.jsx)("div",{className:I,ref:p,children:i((0,v.jsx)(y,(0,a.Z)({size:"small",title:g},k)))}),(0,v.jsx)("div",{className:N,children:o()})]}):(0,v.jsx)(y,(0,a.Z)({className:b,size:"large",title:m},k))})}))},44332:function(e,t,n){n.d(t,{n:function(){return M}});var r,i=n(3972),a=n(29922),s=n(58216),o=n(50959),c=n(84875),l=n.n(c),u=n(21571),d=n(21551),p=n(4365),f=n(47071),m="gQCfB",v="TrHvT",h="ntdtI",g="a6Opf",k="NCiYz",x="mC4XV",_="et8hO",Z="No8Mw",w=n(11527),y=function(e){var t=e.visible,n=e.className,r=e.contentClassName,i=e.onChange,c=e.title,u=e.children,d=(0,o.useState)(t),p=(0,a.Z)(d,2),y=p[0],S=p[1];return(0,o.useEffect)((function(){S(t)}),[t]),(0,w.jsxs)("div",{className:l()(n,m),children:[(0,w.jsxs)("div",{className:v,onClick:function(){S(!y),null==i||i(!t)},children:[(0,w.jsx)(f.HUX,{className:l()(h,(0,s.Z)({},g,y))}),c]}),(0,w.jsxs)("div",{className:l()(x,(0,s.Z)({},_,!y)),children:[(0,w.jsx)("div",{className:k}),(0,w.jsx)("div",{className:l()(r,Z),children:u})]})]})};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}var b,C=function(e){return o.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",width:8,height:6,fill:"none",viewBox:"0 0 8 6"},e),r||(r=o.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 3 2.143 2L7 1"})))};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var I,N=function(e){return o.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:6,height:6,fill:"none",viewBox:"0 0 6 6"},e),b||(b=o.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m1 1 4 4M5 1 1 5"})))},F="gUz1r",E="lRUei",R="A3pyx",L="Lkf8H",T=function(e){var t=e.status,n=e.text;return"init"===t?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:F,children:(0,w.jsx)("span",{className:E})}),(0,w.jsx)("div",{className:R,children:n})]}):"error"===t?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:F,children:(0,w.jsx)(N,{className:L})}),(0,w.jsx)("div",{className:l()([R,L]),children:n})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:F,children:(0,w.jsx)(C,{})}),(0,w.jsx)("div",{className:R,children:n})]})},P=n(97545),U="nRe9o",q="AIUDo",O="iHIXs",D="bgnTA";var A=(I={},(0,s.Z)(I,p.R8.Static,{title:u.oc.t("pc_stickers_release_png_web"),psd:u.oc.t("pc_stickers_release_template_web"),psdLink:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/downloads/1682576253/sticker%20template.psd"}),(0,s.Z)(I,p.R8.GIF,{title:u.oc.t("pc_stickers_release_gif_details_web"),psd:u.oc.t("pc_stickers_release_template_web"),psdLink:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/downloads/1682576253/sticker%20template.psd"}),(0,s.Z)(I,p.R8.Sequence,{title:u.oc.t("pc_stickers_release_frame_web_web"),psd:u.oc.t("pc_stickers_release_template_web"),psdLink:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/downloads/1682576253/sticker%20template.psd"}),I),M=(0,d.Pi)((function(e){var t=e.className,n=e.sticker,r=(0,o.useState)([p.R8.Static]),s=(0,a.Z)(r,2),c=s[0],u=s[1];(0,o.useEffect)((function(){null!=n&&n.fileType&&u([null==n?void 0:n.fileType])}),[null==n?void 0:n.id,null==n?void 0:n.fileType]);return(0,w.jsx)("div",{className:l()(t,U),children:(0,w.jsx)("div",{className:q,children:Object.entries(A).map((function(e){var t=(0,a.Z)(e,2),r=t[0],s=t[1];return(0,w.jsxs)(y,{title:s.title,visible:c.includes(r),onChange:function(){return function(e){c.includes(e)?u(c.filter((function(t){return t!==e}))):u([].concat((0,i.Z)(c),[e]))}(r)},children:[s.psd&&(0,w.jsx)("div",{className:O,onClick:function(){var e;(e=s.psdLink)&&(0,P.Yo)({url:e})},children:s.psd}),Object.entries(p.BI[r]).map((function(e){var t,i,s,o=(0,a.Z)(e,2),c=o[0],l=o[1];return(0,w.jsx)("div",{className:D,children:(0,w.jsx)(T,{status:(t=r,i=c,t!==(null==n?void 0:n.fileType)?"init":null!=n&&null!==(s=n.unmetRequirements)&&void 0!==s&&s.includes(i)?"error":"success"),text:l||""})},c)}))]},r)}))})})}))},78681:function(e,t,n){n.d(t,{E:function(){return b}});var r=n(50959),i=n(21551),a=n(78794),s=n(78979),o=n(36004),c=n(71802),l=n(43637),u=n(23826),d=n(66923),p=n(78367),f=n(4365),m=n(24738),v=n(40209),h="NLA82",g="U5o7T",k="MV24f",x="ovnUX",_="i_HCT",Z="mb60y",w="burDo",y="VT3yp",S=n(11527),b=(0,i.Pi)((function(e){var t=(0,a.$)().t,n=(0,s.XQ)(),i=e.importStickerFileService,b=e.sticker,C=e.initFields,j=e.controlField,I=e.onStartEditSequenceSettings,N=e.onSaveSequenceSettings,F=i.stickerListStore;(0,r.useLayoutEffect)((function(){C(b)}),[b]);var E=(0,v._)().getDisplayLength,R="single.tags";return(0,S.jsxs)("div",{className:h,children:[(0,S.jsx)(c.o,{className:_,src:(0,p.B3)(b),isSelected:!1,isInvalid:b.unmetRequirements.length>0,isUpdating:(0,p.Nf)(b),size:128}),(0,S.jsx)(o.l,{fieldClassName:Z,label:t("pc_stickers_release_set_title_web"),field:"single.title",maxLength:f.S8,noErrorMessage:!0,placeholder:t("pc_stickers_release_xy_name_web",{X:1,Y:E(f.S8)}),isCanEnter:!1,rules:[{required:!0,message:""}],onChange:function(e){return F.updateFormState(b,{title:e})}}),(0,S.jsxs)("div",{className:g,children:[(0,S.jsx)(l.u,{fieldClassName:Z,label:t("pc_stickers_release_tag_set_web"),placeholder:t("please_enter_the_label_enter_key_to_confirm_the_input_web"),field:R,itemType:m.qG.Sticker,noErrorMessage:!0,recommendConfig:{title:b.title,uri:b.largeImageUri},rules:[{required:!0,message:t("pc_stickers_release_max_tag_web",{X:f.pM})}],onChange:function(e){return F.updateFormState(b,{tags:e})}}),(0,S.jsx)("span",{className:k,onClick:function(){null==F||F.applyForTags(n.getValue(R)||[])},children:t("pc_stickers_release_apply_all_web")})]}),(0,S.jsxs)("div",{className:x,children:[(null==j?void 0:j.canOriginal)&&(0,S.jsx)(u.V,{noLabel:!0,field:"single.isOriginal",itemType:m.qG.Sticker}),(null==j?void 0:j.canBusiness)&&(0,S.jsx)(s.l0.Checkbox,{noLabel:!0,field:"single.isBusiness",children:t("commercial_stickers_web")}),(null==j?void 0:j.canVip)&&(0,S.jsx)(s.l0.Checkbox,{noLabel:!0,field:"single.isVip",children:t("to_pay_for_stickers_web")})]}),b.isSequence&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:w,children:t("pc_stickers_release_higher_settings_web")}),(0,S.jsx)(d.ZP,{className:y,prefix:"single",showGlobalSetting:!0,onStartEdit:I,onSave:N})]})]})}))},4258:function(e,t,n){n.d(t,{Bo:function(){return L},rV:function(){return R},sc:function(){return E},LU:function(){return T}});var r,i=n(50959),a=n(84875),s=n.n(a),o=n(78794),c=n(42677);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u,d=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=i.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m4 4 4 4M8 4 4 8"})))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var f,m=function(e){return i.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),u||(u=i.createElement("path",{fill:"#6C6C6C",fillRule:"evenodd",d:"M6.875 6.154a.218.218 0 0 0 0-.308L4.447 3.418A.783.783 0 1 1 5.554 2.31l3.415 3.415a.387.387 0 0 1 0 .548L5.554 9.689a.783.783 0 1 1-1.107-1.107l2.428-2.428Z",clipRule:"evenodd"})))};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}var h=function(e){return i.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),f||(f=i.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m3 6 2.143 2L9 4"})))},g=n(3088),k=n(49919),x=n(29922),_="h0Lfz",Z=n(11527),w=function(e){var t=e.text,n=e.gap,r=e.speed,a=void 0===r?26:r,s=(0,i.useRef)(null),o=(0,i.useRef)(null),c=(0,i.useState)(0),l=(0,x.Z)(c,2),u=l[0],d=l[1];(0,i.useEffect)((function(){var e=s.current,t=o.current;if(e&&t){var n=e.getBoundingClientRect().left,r=t.getBoundingClientRect().left;d(r-n)}}),[]);var p={"--heycan-pro-marquee-loop-text-animation-transform-to":"translateX(".concat(-u,"px)"),"--heycan-pro-marquee-loop-text-animation-duration":"".concat((u/a).toFixed(2),"s")};return(0,Z.jsxs)("span",{ref:s,className:u?_:"",style:p,children:[(0,Z.jsx)("span",{children:t}),(0,Z.jsx)("span",{ref:o,style:{marginInlineStart:n},children:t})]})},y="dFZKq",S="i0yFz",b="IeiKY",C="sRVA8",j="Uwv4U",I="OLjsd",N="d0XGO",F="GDD5K",E=function(e){var t=e.className,n=(0,o.$)().t,r=(0,g.S)().handleMouseEnter;return(0,Z.jsxs)("div",{className:s()(y,t),children:[(0,Z.jsx)(c.a,{className:S,size:12,arcColor:"grey-1"}),(0,Z.jsx)("div",{className:j,onMouseEnter:r,children:n("pc_stickers_release_in_web")})]})},R=function(e){var t=e.className,n=e.tooltip,r=(0,o.$)().t,a=(0,g.w)({content:n,className:F}).handleMouseEnter,c=(0,i.useRef)(null),l=function(e){var t=e.text,n=e.getEllipsisDOM,r=(0,i.useState)(!1),a=(0,x.Z)(r,2),s=a[0],o=a[1];return{isMarqueeLoopRunning:s,setIsMarqueeLoopRunning:function(e){var t=null==n?void 0:n();t&&t.offsetWidth>=t.scrollWidth||o(e)},reactNode:s?(0,Z.jsx)(w,(0,k.Z)({},e)):(0,Z.jsx)("span",{children:t})}}({text:r("pc_stickers_release_invalid_web"),gap:16,getEllipsisDOM:function(){return c.current}}),u=l.setIsMarqueeLoopRunning,p=l.reactNode;return(0,Z.jsxs)("div",{className:s()(y,t,I),onMouseEnter:function(e){u(!0),a(e)},onMouseLeave:function(){return u(!1)},children:[(0,Z.jsx)(d,{className:S}),(0,Z.jsx)("div",{ref:c,className:j,children:p})]})},L=function(e){var t=e.className,n=e.text,r=(0,g.S)().handleMouseEnter;return(0,Z.jsxs)("div",{className:s()(y,t,N),children:[(0,Z.jsx)(h,{className:S}),(0,Z.jsx)("div",{className:j,onMouseEnter:r,children:n})]})},T=function(e){var t=e.className,n=(0,o.$)().t,r=(0,g.S)().handleMouseEnter;return(0,Z.jsxs)("div",{className:s()(y,t),children:[(0,Z.jsx)("div",{className:s()(S,b),children:(0,Z.jsx)("div",{className:C})}),(0,Z.jsx)("div",{className:j,onMouseEnter:r,children:n("pc_stickers_release_editing_web")}),(0,Z.jsx)(m,{className:S})]})}},71802:function(e,t,n){n.d(t,{o:function(){return v}});var r=n(84875),i=n.n(r),a=n(78794),s=n(88842),o="_swiU",c="zxBfW",l="RjlCE",u="uqWk6",d="V0aeS",p="eTsXd",f="mjlA4",m=n(11527),v=function(e){var t=e.className,n=e.src,r=e.onClick,v=e.onContextMenu,h=e.isSelected,g=e.isInvalid,k=e.isUpdating,x=e.size,_=(0,a.$)().t;return(0,m.jsxs)("div",{className:i()(t,o,g&&u,h&&d),style:{width:x,height:x},onClick:r,onContextMenu:v,children:[(0,m.jsxs)("div",{className:l,children:[n?(0,m.jsx)("img",{className:p,src:n}):(0,m.jsx)(s.t,{className:p,iconWidth:Math.round(.41*x)}),k&&(0,m.jsx)("div",{className:f,children:_("pc_sticker_upgrading_web")})]}),(0,m.jsx)("div",{className:c})]})}},98893:function(e,t,n){n.d(t,{M:function(){return q},z:function(){return O}});var r=n(58216),i=n(29922),a=n(50959),s=n(21551),o=n(84875),c=n.n(o),l=n(38270),u=n(4690),d=n(78794),p=n(71802),f=n(4258),m=n(93001),v=n(4365),h=n(78367),g=n(20014),k="IsKvn",x="bzXuu",_="lp460",Z="Tb38U",w=n(11527),y=(0,s.Pi)((function(e){var t=e.className,n=e.sticker,r=e.isSelected,i=e.onClick,a=e.onReimport,s=e.onRemove,o=(0,d.$)().t,l=(0,h.B3)(n),u=n.unmetRequirements.length>0,y=(0,g.D)({content:(0,w.jsx)(m.m,{items:[{key:"reimport",render:function(e){var t=e.key,r=e.className;return u&&(0,w.jsx)("div",{className:c()(r,_),onClick:function(){return a(n)},children:o("pc_stickers_release_again_web")},t)}},{key:"remove",render:function(e){var t=e.key,r=e.className;return(0,w.jsx)("div",{className:c()(r,_),onClick:function(){return s(n)},children:o("pc_stickers_release_delete_web")},t)}}]})}).handleContextMenu;return(0,w.jsxs)("div",{className:c()(t,k),onClick:function(){i(n)},children:[(0,w.jsx)(p.o,{src:l,isSelected:r,isInvalid:u,isUpdating:(0,h.Nf)(n),size:80,onContextMenu:function(e){y(e),i(n)}}),l?u?(0,w.jsx)(f.rV,{className:x,tooltip:(0,w.jsx)("div",{className:Z,children:n.unmetRequirements.map((function(e){var t=v.BI[n.fileType][e];return t?(0,w.jsx)("div",{children:t},e):null}))})}):n.isInfoComplete?(0,w.jsx)(f.Bo,{className:x,text:n.title}):(0,w.jsx)(f.LU,{className:x}):(0,w.jsx)(f.sc,{className:x})]})})),S=n(49919),b=n(20057),C=n(54314),j=n(64240),I={cursor:"move"},N=function(e,t,n){return n>e&&n<t},F=function(e){var t=e.children,n=e.index,r=e.id,s=e.className,o=e.onMoveCard,c=e.onHoverCard,l=e.onCardClick,u=e.startPoint,d=e.scrollAreaRef,p=e.stickerListRect,f=e.onStickerListRect,m=(0,a.useRef)(null),v=(0,C.L)({accept:"sticker",collect:function(e){return{handlerId:e.getHandlerId()}}}),h=(0,i.Z)(v,2),g=h[0].handlerId,k=h[1],x=function(){return(new Date).getTime()-u.current.clickTime[0]>q},_=(0,j.c)({type:"sticker",item:function(){return{id:r,index:n}},collect:function(e){return{isDragging:e.isDragging(),monitor:e}},canDrag:function(){return x()}}),Z=(0,i.Z)(_,2),y=Z[0].isDragging;k((0,Z[1])(m));var F=function(e){var t,r;if(d.current&&m.current&&x()){var i=d.current.getBoundingClientRect(),a=i.top,s=i.bottom;if(N(a,a+20,e.clientY)&&d.current.scrollTop>0)return d.current.scrollTop-=2,void c(n,-1);if(N(s-20,s,e.clientY)&&d.current.scrollTop+d.current.clientHeight<d.current.scrollHeight)return d.current.scrollTop+=2,void c(n,-1);var o=function(e,t){var n=e.findIndex((function(e){return N(e.left,e.right,t.x)&&N(e.top,e.bottom,t.y)}));if(n<0)return{hoverIndex:-1,direction:0};var r=(e[n].right+e[n].left)/2;return{hoverIndex:n,direction:t.x<r?-1:0}}(p,{x:e.clientX+((null===(t=u.current.centerOffset)||void 0===t?void 0:t.x)||0),y:e.clientY+((null===(r=u.current.centerOffset)||void 0===r?void 0:r.y)||0)}),l=o.hoverIndex,f=o.direction;c(n,l,f)}},E=(0,b.Z)((function(e){return F(e)}),20);return(0,a.useEffect)((function(){if(m.current){var e=m.current.getBoundingClientRect();null==f||f(n,e)}}),[m.current,f,n]),(0,w.jsx)("div",{draggable:!0,ref:m,className:s,style:(0,S.Z)((0,S.Z)({},I),{},{opacity:y?0:1}),"data-handler-id":g,onDrag:E,onDragStart:function(e){var t;if(d.current&&m.current){l(n);var r=(null===(t=d.current)||void 0===t?void 0:t.scrollTop)||0,i=m.current.getBoundingClientRect();u.current={x:(null==e?void 0:e.clientX)||-1,y:(null==e?void 0:e.clientY)||-1,start:!0,scrollTop:r,centerOffset:{x:(i.left+i.right)/2-e.clientX,y:(i.top+i.bottom)/2-e.clientY},index:n,clickTime:u.current.clickTime}}},onDragEnd:function(){x()&&o()},children:t})},E="nMx3r",R="eLbCl",L="Q4SfV",T="oyK3v",P="h89fn",U="TnRUI",q=1e3,O=(0,s.Pi)((function(e){var t=(0,a.useState)(-1),n=(0,i.Z)(t,2),s=n[0],o=n[1],d=(0,a.useState)(-1),p=(0,i.Z)(d,2),f=p[0],m=p[1],v=(0,a.useRef)({x:-1,y:-1,start:!1,scrollTop:0,index:-1,clickTime:[-3e3,0]}),h=(0,a.useRef)([]),g=e.className,k=e.importStickerFileService,x=e.onSelect,_=e.onReimport,Z=k.stickerListStore,S=(0,a.useCallback)((function(e){var t;t=Date.now()-v.current.clickTime[0]>q,v.current.clickTime=t?[v.current.clickTime[1],Date.now()]:[v.current.clickTime[0],Date.now()],Z.selectedId!==e.id&&x(e)}),[x,v.current]),b=function(){-1!==s&&(Z.dragInsert(v.current.index,s+f),o(-1),v.current={x:-1,y:-1,start:!1,scrollTop:0,index:-1,clickTime:v.current.clickTime})},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v.current.start&&(o(t),m(n))},j=function(e,t){h.current[e]=t};return(0,w.jsx)("div",{className:c()(g,E),children:(0,w.jsx)("div",{className:R,children:(0,w.jsx)(l.W,{backend:u.PD,children:Z.stickers.map((function(e,t){var n;return(0,w.jsx)(F,{id:e.id,className:L,index:t,scrollAreaRef:Z.scrollAreaRef,startPoint:v,stickerListRect:h.current,onStickerListRect:j,onMoveCard:b,onHoverCard:C,onCardClick:function(e){S(Z.stickers[e])},children:(0,w.jsx)(y,{className:c()(T,(n={},(0,r.Z)(n,P,s===t&&0===f),(0,r.Z)(n,U,s===t&&-1===f),n)),sticker:e,isSelected:Z.selectedId===e.id,onClick:S,onReimport:_,onRemove:k.removeSticker})},e.id)}))})})})}))},71232:function(e,t,n){n.d(t,{q:function(){return k}});var r=n(43941),i=n(66097),a=n(29922),s=n(50959),o=n(78979),c=n(82242),l=n(78794),u=n(36928),d="UomD1",p="Xpu7O",f="xpHOT",m="FpFmf",v="PDm0r",h="WxcVC",g=n(11527),k=(0,s.forwardRef)((function(e,t){var n=e.uploadStats,k=e.onRetryUpload,x=e.onCancel,_=e.onShowUploadFail,Z=e.onPromptConfirmToCancel,w=n.pending,y=n.succeeded,S=n.failed,b=w+y+S,C=Math.floor(y/b*100),j=(0,l.$)().t,I=(0,s.useState)(!1),N=(0,a.Z)(I,2),F=N[0],E=N[1],R=!w&&S>0,L=(0,c.Z)((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.warn({mainText:j("pc_stickers_release_confirm_delete_web"),subText:j("pc_stickers_release_uploading_web"),confirmBtnText:j("pc_stickers_release_confirm_quit_web"),cancelBtnText:j("pc_stickers_release_cancel_web")});case 3:return t=e.sent,e.abrupt("return",t===u.L.Confirm);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),T=(0,c.Z)((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=8;break}return t=L(),Z(t),e.next=5,t;case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:x(),E(!1);case 10:case"end":return e.stop()}}),e)})))),P=function(){return(0,g.jsx)(o.zx,{className:h,theme:"solid",type:"secondary",onClick:T,children:j("pc_stickers_release_cancel_web")})};return(0,s.useImperativeHandle)(t,(function(){return{show:function(){return E(!0)},hide:function(){return E(!1)}}})),(0,s.useEffect)((function(){F&&R&&_()}),[F&&R]),(0,g.jsx)(o.u_,{visible:F,className:d,header:null,footer:null,centered:!0,maskClosable:!1,closable:!1,children:R?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:p,children:j("pc_stickers_release_network_anomaly_web")}),(0,g.jsx)("div",{className:f,children:(0,g.jsx)("span",{children:j("pc_stickers_release_upload_error_again_web",{X:(0,g.jsx)("span",{className:m,onClick:k,children:j("pc_sticker_retry_web")},"X")})})}),(0,g.jsx)(o.Ex,{className:v,percent:100,size:"small",stroke:"var(--heycan-pro-yellow-0)"}),P()]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:p,children:j("pc_stickers_release_uploading_material_web")}),(0,g.jsx)("div",{className:f,children:j("pc_stickers_release_upload details_web",{X:y,Y:b,Z:C})}),(0,g.jsx)(o.Ex,{className:v,percent:C,size:"small",stroke:"var(--heycan-pro-cyan-2)"}),P()]})})}))},55512:function(e,t,n){var r=n(3972),i=n(29922),a=n(50959),s=n(21551),o=n(78979),c=n(11527);(0,s.Pi)((function(e){var t=(0,a.useState)(!1),n=(0,i.Z)(t,2),s=n[0],l=n[1];(0,a.useEffect)((function(){window.showStickerDebugWindow=function(){var e,t;l(!0),null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),null===(t=window.vconsole)||void 0===t||t.showSwitch()}}),[]);var u=(0,a.useRef)(null),d=window.store;return s?(0,c.jsxs)("div",{style:{position:"fixed",top:10,left:0,bottom:10,width:250,zIndex:2,backgroundColor:"white",padding:8,display:"flex",flexDirection:"column",overflow:"auto",color:"black"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("div",{children:"\u5bfc\u5165\u7684\u8d34\u7eb8\u72b6\u6001"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)("div",{style:{cursor:"pointer",marginInlineEnd:8},onClick:function(){var e,t,n=(null===(e=u.current)||void 0===e?void 0:e.innerText)||"",r=document.createElement("textarea");r.value=n,document.body.append(r),r.select(),document.execCommand("copy"),r.blur(),o.FN.info("\u590d\u5236\u6210\u529f"),null===(t=r.parentNode)||void 0===t||t.removeChild(r)},children:"\u590d\u5236"}),(0,c.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return l(!1)},children:"\u5173\u95ed"})]})]}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"50px 1fr",rowGap:10,columnGap:8,marginTop:10},ref:u,children:[(0,c.jsx)("div",{children:"\u4e0a\u4f20 stats"}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsxs)("div",{children:["pending:"," ",(d.uploadStats||d.stickerListStore.uploadStats).pending]}),(0,c.jsxs)("div",{children:["succeeded:"," ",(d.uploadStats||d.stickerListStore.uploadStats).succeeded]}),(0,c.jsxs)("div",{children:["failed:"," ",(d.uploadStats||d.stickerListStore.uploadStats).failed]})]}),d.stickersForOnlineImageEditorStats&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:"\u5728\u7ebf\u8bbe\u8ba1 stats"}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsxs)("div",{children:["pending: ",d.stickersForOnlineImageEditorStats.pending]}),(0,c.jsxs)("div",{children:["ready: ",d.stickersForOnlineImageEditorStats.ready]}),(0,c.jsxs)("div",{children:["failed: ",d.stickersForOnlineImageEditorStats.failed]})]})]}),d.collection&&[d.collection.cover].concat((0,r.Z)(d.collection.exampleImages)).map((function(e,t){var n=e.id,r=0===t;return[(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("div",{children:t}),(0,c.jsx)("div",{children:r?"\u5c01\u9762\u56fe":"\u793a\u4f8b\u56fe"})]},"collection-".concat(t,"-1")),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["id: ",n]}),(0,c.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["uri: ",e.uri||"\u4e0a\u4f20\u4e2d..."]}),(0,c.jsxs)("div",{children:["\u7f29\u7565\u56fe: ",e.url?"OK":"\u2757\ufe0f\u65e0"]}),(0,c.jsxs)("div",{children:["isUploadFailed:"," ",e.isUploadFailed?"\u2757\ufe0ftrue - \u4e0a\u4f20\u5931\u8d25":"false"]}),r&&(0,c.jsxs)("div",{children:["needImport:"," ",e.needImport?"\u2757\ufe0ftrue - \u672a\u751f\u6210":"false".concat(e.id?"":" - \u2757\ufe0f\u7b49\u5f85\u751f\u6210\u4e2d")]})]},"collection-".concat(t,"-2"))]})),d.stickerListStore.stickers.map((function(e,t){var n=e.id,r=e.isSequence;return[(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("div",{children:t}),(0,c.jsx)("div",{children:r?"\u5e8f\u5217\u5e27":"\u666e\u901a\u8d34\u7eb8"})]},"".concat(n,"-1")),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["id: ",n]}),(0,c.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["uri:"," ",e.uri||(e.isUploadFailed?"":"\u4e0a\u4f20\u4e2d...")]}),(0,c.jsxs)("div",{children:["\u7f29\u7565\u56fe:"," ",e.coverSrc||e.firstFrameCoverSrc?"OK".concat(e.coverSrc?"":" - \u7b2c\u4e00\u5e27"):"\u2757\ufe0f\u65e0"]}),(0,c.jsxs)("div",{children:["isUploadFailed:"," ",e.isUploadFailed?"true - ".concat(e.uri?"\u274c\u5e8f\u5217\u5e27 gif \u56fe\u5408\u6210\u5931\u8d25":"\u274c\u4e0a\u4f20\u5931\u8d25"):"false"]}),(0,c.jsxs)("div",{style:{whiteSpace:"nowrap"},children:["unmetRequirements:"," ",e.unmetRequirements.length>0&&"\u274c",e.unmetRequirements.join(", ")||"\u65e0"]}),r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{children:["largeImgUri:"," ",e.largeImageUri?"OK":"\u2757\ufe0f\u65e0".concat(e.isUploadFailed?"":e.uri?" - \u5e8f\u5217\u5e27 gif \u56fe\u5408\u6210\u4e2d...":" - zip \u5305\u4e0a\u4f20\u4e2d...")]}),(0,c.jsxs)("div",{children:["\u5e8f\u5217\u5e27\u91cd\u65b0\u5408\u6210\u4e2d:"," ",e.isSequenceSettingsUpdating?"true":"false"]}),(0,c.jsxs)("div",{children:["\u5e8f\u5217\u5e27\u8bbe\u7f6e: ",e.sequenceSettings.fps,"fps/",e.sequenceSettings.loop?"\u5faa\u73af\u64ad\u653e":"\u5355\u6b21\u64ad\u653e"]})]})]},"".concat(n,"-2"))]}))]})]}):null}))},46170:function(e,t,n){n.d(t,{WQ:function(){return u}});var r=n(43941),i=n(66097),a=n(50959),s=n(18513),o=n(49765),c=n(64514),l=1e4;function u(e){var t=e.stickerListStore,n=(0,o.fv)((function(){return{isImportLoading:!1,hideImportLoadingTimer:new c.B,notifyImportLoadingFinish:null,showImportLoading:(e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isImportLoading=!0,e.next=3,Promise.race([new Promise((function(e){return n.notifyImportLoadingFinish=e})),n.hideImportLoadingTimer.timeout(l)]);case 3:(0,s.z)((function(){n.isImportLoading=!1}));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),finishImportLoadingFinishIfNeeded:function(){n.isImportLoading&&n.notifyImportLoadingFinish&&(n.notifyImportLoadingFinish(),n.notifyImportLoadingFinish=null)},destroy:function(){n.hideImportLoadingTimer.cancel()}};var e}));return(0,a.useEffect)((function(){var e=(0,s.EH)((function(){t.isAllStickersThumbnailReady&&n.finishImportLoadingFinishIfNeeded()}));return function(){e()}}),[]),n}},43771:function(e,t,n){n.d(t,{T:function(){return w}});var r=n(3972),i=n(39465),a=n(17576),s=n(43941),o=n(29922),c=n(66097),l=n(49919),u=n(87989),d=n(51852),p=n(58216),f=n(82665),m=n(87367),v=n(4365),h=n(18672),g=function(){function e(t){var n;(0,u.Z)(this,e),(0,p.Z)(this,"cacheData",null),this.options=t,this.cacheData=null!==(n=this.options.initCacheData)&&void 0!==n?n:null}var t,n,r;return(0,d.Z)(e,[{key:"get",value:(r=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cacheData||this.isExpired()){e.next=4;break}return t=this.cacheData.data,this.silentRefreshIfNeeded(),e.abrupt("return",t);case 4:return e.abrupt("return",this.updateCache());case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getSync",value:function(){var e,t;return null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null}},{key:"isExpired",value:function(){if(!this.cacheData)return!0;var e=this.cacheData,t=e.expireTime,n=e.refreshTime,r=Date.now();return r<n||t<=r}},{key:"needSilentRefresh",value:function(){return!this.cacheData||this.cacheData.silentRefreshTime<=Date.now()}},{key:"silentRefreshIfNeeded",value:(n=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.needSilentRefresh()){e.next=3;break}return e.next=3,this.updateCache();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateCache",value:(t=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.refresh(null!==(t=null===(n=this.cacheData)||void 0===n?void 0:n.data)&&void 0!==t?t:null);case 2:return r=e.sent,i=r.data,a=r.expireTime,o=r.silentRefreshTime,this.cacheData={data:i,expireTime:a,silentRefreshTime:o,refreshTime:Date.now()},e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),k=n(7723),x=["images"],_=["stickers"],Z=6e5,w=function(){function e(t){var n,r=this;(0,u.Z)(this,e),(0,p.Z)(this,"unregisterStickerFileProcessResultEvent",void 0),(0,p.Z)(this,"importFileInfoMap",new Map),(0,p.Z)(this,"handleStickerFileProcessResultEvent",(function(e){var t=r.importFileInfoMap.get(e.id);if(t){var n=t.thumbnailEventHandler,i=t.uploadEventHandler;switch(e.type){case"Thumbnail":return void(null==n||n(e));case"Upload":var a=e.uri,s=e.error,o=e.isCompressed,c=e.resolutionBeforeCompress,u=e.resolutionAfterCompress,d=e.sizeBeforeCompress,p=e.sizeAfterCompress;return t.stats=(0,l.Z)((0,l.Z)({},t.stats),{},{isCompressed:o,resolutionBeforeCompress:c,resolutionAfterCompress:u,sizeBeforeCompress:d,sizeAfterCompress:p,uploadError:a?"":s}),void(null==i||i(e));default:return}}})),(0,p.Z)(this,"uploadConfigsCache",new g({refresh:(n=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,i,a,c,l,u,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.getUploadConfigByScene(m.AJ.Image),r.getUploadConfigByScene(m.AJ.Object)]);case 2:return t=e.sent,n=(0,o.Z)(t,2),i=n[0],a=n[1],c={imageUploadConfig:i,objectUploadConfig:a},l=new Date(i.currentTime).getTime(),u=Math.min(new Date(i.expiredTime).getTime(),l+18e5),d=l+Z,e.abrupt("return",{data:c,refreshTime:l,expireTime:u,silentRefreshTime:d});case 11:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})),(0,p.Z)(this,"removeSticker",(function(e){r.cleanupStickerInfo(e),r.stickerListStore.removeSticker(e)})),(0,p.Z)(this,"sequenceInfoMap",new Map),this.props=t,this.unregisterStickerFileProcessResultEvent=this.props.api.registerStickerFileProcessResultEvent(this.handleStickerFileProcessResultEvent)}var t,n,w,y,S,b,C,j,I,N,F,E,R,L,T,P,U;return(0,d.Z)(e,[{key:"stickerListStore",get:function(){return this.props.stickerListStore}},{key:"sendLogServ",get:function(){return this.props.sendLogServ}},{key:"getUploadConfigByScene",value:(U=(0,c.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m._M)({scene:t});case 2:return n=e.sent,e.abrupt("return",{currentTime:n.current_time,expiredTime:n.expired_time,accessKey:n.access_key_id,secretKey:n.secret_access_key,sessionToken:n.session_token,hostDomain:n.upload_domain,nameSpace:2===n.space_type?"":n.space_name,serviceId:2===n.space_type?n.space_name:""});case 4:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)})},{key:"getUploadConfigs",value:(P=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.uploadConfigsCache.get();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),(0,k.RF)("[ImportStickerFileService] getUploadConfigs failed for ".concat(t),e.t0,{action:t}),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return P.apply(this,arguments)})},{key:"getOpenStickerFilePickerRequest",value:(T=(0,c.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUploadConfigs("OpenStickerFilePicker");case 2:return n=e.sent,e.abrupt("return",(0,l.Z)((0,l.Z)((0,l.Z)({},n),v.rg),{},{sequence:(0,l.Z)({},v.Q0),needCheckStaticDynamicMix:!1,hasImportedType:""},t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"openStickerFilePicker",value:(L=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOpenStickerFilePickerRequest(t);case 2:return n=e.sent,e.next=5,this.props.api.openStickerFilePicker(n);case 5:return r=e.sent,i=this.ensureMaxImageCount(n,r),e.abrupt("return",this.initStickers(i));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"uploadDroppedStickerFiles",value:(R=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOpenStickerFilePickerRequest(t);case 2:return n=e.sent,e.next=5,this.props.api.uploadDroppedStickerFiles(n);case 5:return r=e.sent,i=this.ensureMaxImageCount(n,r),e.abrupt("return",this.initStickers(i));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"ensureMaxImageCount",value:function(e,t){var n=e.maxCount,r=t.images,i=(0,a.Z)(t,x);return r.length>n&&(0,k.RF)("[ImportStickerFileService] jsb resp images.length > maxCount",null,{imagesCount:r.length,maxCount:n}),(0,l.Z)((0,l.Z)({},i),{},{images:r.slice(0,n)})}},{key:"ensureFileInfo",value:function(e){var t=this.importFileInfoMap.get(e);return t||(t={thumbnailEventHandler:null,uploadEventHandler:null,stats:{isCompressed:!1,resolutionBeforeCompress:"",resolutionAfterCompress:"",sizeBeforeCompress:0,sizeAfterCompress:0,uploadStartAt:0,uploadTime:0,uploadError:""}},this.importFileInfoMap.set(e,t)),t}},{key:"getFileStats",value:function(e){return this.ensureFileInfo(e).stats}},{key:"registerThumbnailEvent",value:function(e,t){this.ensureFileInfo(e).thumbnailEventHandler=t}},{key:"registerUploadEvent",value:function(e,t){this.ensureFileInfo(e).uploadEventHandler=t}},{key:"initStickers",value:function(e){var t,n=this,r=e.isSequenceImport,a=e.images,o=[],l=(0,i.Z)(a);try{var u=function(){var e=t.value,i=e.id,a=e.path,l=e.width,u=e.height;o.push(n.stickerListStore.makeInitSticker({id:i,path:a,width:l,height:u,isSequence:r})),n.recordFileUploadStart(i),n.registerThumbnailEvent(i,function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.stickerListStore.getSticker(i)){e.next=4;break}return(0,k.RF)("[ImportStickerFileService] sticker thumbnail ignored ".concat(i)),e.abrupt("return");case 4:if(t.base64){e.next=7;break}return(0,k.RF)("[ImportStickerFileService] sticker thumbnail failed ".concat(i)),e.abrupt("return");case 7:return a=(0,h.F2)(t.base64),e.next=10,(0,h.J9)(a).catch((function(){return a}));case 10:o=e.sent,n.stickerListStore.updateThumbnailSrc(r,o),n.checkRequirements(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.registerUploadEvent(i,(function(e){var t=n.stickerListStore.getSticker(i);if(t){var r=e.uri;if(!r){var a=e.error||"unknown";return n.handleStickerUploadEnd(t,a),void(0,k.RF)("[ImportStickerFileService] sticker upload failed ".concat(i),null,{error:a})}n.stickerListStore.updateUploadedData(t,r),t.isSequence?n.generateSequenceSticker(t):n.handleStickerUploadEnd(t),(0,k.c6)("[ImportStickerFileService] sticker upload success ".concat(i),{uri:r,isSequence:t.isSequence})}else(0,k.RF)("[ImportStickerFileService] sticker upload ignored ".concat(i))}))};for(l.s();!(t=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}return o}},{key:"recordFileUploadStart",value:function(e){var t=this.ensureFileInfo(e).stats;t.uploadStartAt=performance.now(),t.uploadTime=0,t.uploadError=""}},{key:"recordFileUploadEnd",value:function(e,t){var n=this.importFileInfoMap.get(e);if(n&&0===n.stats.uploadTime){var r=n.stats;r.uploadTime=Math.round(performance.now()-r.uploadStartAt),"string"==typeof t&&(r.uploadError=t)}}},{key:"handleStickerUploadEnd",value:function(e,t){"string"==typeof t&&this.stickerListStore.setUploadFailed(e),this.recordFileUploadEnd(e.id,t),this.sendLogServ.sendStickerUploadStatusLog({sticker:e,stats:this.getFileStats(e.id)})}},{key:"revokeBlobUrlIfNeeded",value:function(e){null!=e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}},{key:"cleanupStickerInfo",value:function(e){var t=this,n=e.id;this.revokeBlobUrlIfNeeded(e.firstFrameCoverSrc),this.revokeBlobUrlIfNeeded(e.coverSrc),this.sequenceInfoMap.forEach((function(e,r){if(e.id===n){t.sequenceInfoMap.delete(r);var i=e.cache.getSync();t.revokeBlobUrlIfNeeded(null==i?void 0:i.gifCover.blobUrl)}})),this.removeFile(n)}},{key:"removeFile",value:function(e){this.importFileInfoMap.delete(e)}},{key:"getSequenceInfoKey",value:function(e){var t=e.id,n=e.sequenceSettings,r=n.fps,i=n.loop;return"".concat(t,"-").concat(r,"-").concat(i)}},{key:"getStickerWithSameSequenceSettings",value:function(e,t){var n=this.stickerListStore.getSticker(e),r=null==n?void 0:n.sequenceSettings;return r&&r.fps===t.fps&&r.loop===t.loop?n:null}},{key:"generateSequenceSticker",value:(E=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,c,u,d,p,f,g,x,_,Z,w,y,S,b,C,j,I,N,F,E,R;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.uri,i=t.sequenceSettings,a=i.fps,c=i.loop,u=this.getSequenceInfoKey(t),!(d=this.sequenceInfoMap.get(u))){e.next=18;break}return e.prev=4,e.next=7,d.cache.get();case 7:return p=e.sent,(0,k.c6)("[ImportStickerFileService] get sequenceInfo cache success ".concat(n),{key:u}),e.abrupt("return",this.updateSequenceStickerInfo(t,p));case 12:return e.prev=12,e.t0=e.catch(4),(0,k.RF)("[ImportStickerFileService] update sequenceInfo cache failed ".concat(n),e.t0,{key:u}),(f=this.getStickerWithSameSequenceSettings(n,{fps:a,loop:c}))&&this.handleStickerUploadEnd(f,"update sequenceInfo cache failed"),e.abrupt("return");case 18:return g=null,x="",e.prev=20,e.next=23,(0,m.PU)((0,l.Z)((0,l.Z)({},v.mr),{},{file_uri:r,fps:a,loop:c}));case 23:return g=e.sent,e.next=26,(0,h.J9)(g.gif_infos[0].url);case 26:x=e.sent,e.next=35;break;case 29:return e.prev=29,e.t1=e.catch(20),(0,k.RF)("[ImportStickerFileService] genSequenceSticker failed ".concat(n),e.t1,{key:u,resp:g}),(_=this.getStickerWithSameSequenceSettings(n,{fps:a,loop:c}))&&this.handleStickerUploadEnd(_,"genSequenceSticker failed"),e.abrupt("return");case 35:if(Z=this.getStickerWithSameSequenceSettings(n,{fps:a,loop:c})){e.next=38;break}return e.abrupt("return");case 38:return y=(w=g).gif_infos,S=w.file_uri,b=w.file_md5,C=w.file_size,j=(0,o.Z)(y,2),I=j[0],N=j[1],F={gifCover:(0,l.Z)((0,l.Z)({},I),{},{blobUrl:x}),gifLargeImage:(0,l.Z)((0,l.Z)({},N),{},{blobUrl:""}),stickerPackage:{uri:S,md5:b,size:C}},E=this.initSequenceInfoCache(F),this.sequenceInfoMap.set(u,{id:n,cache:E}),R=!Z.isSequenceSettingsUpdating,e.next=46,this.updateSequenceStickerInfo(Z,F);case 46:R&&this.handleStickerUploadEnd(Z),(0,k.c6)("[ImportStickerFileService] genSequenceSticker success ".concat(n),{key:u,isFirstTime:R,resp:g});case 48:case"end":return e.stop()}}),e,this,[[4,12],[20,29]])}))),function(e){return E.apply(this,arguments)})},{key:"updateSequenceStickerInfo",value:(F=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r,i,a,o,c,l,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.uri,a=t.sequenceSettings,o=a.fps,c=a.loop,l=n.gifCover,u=n.gifLargeImage,!this.props.needSaveSequenceGifUrl){e.next=5;break}return e.next=5,this.props.api.saveSequenceGifUrl({id:r,url:u.url,coverUrl:l.url,fps:o,loop:c});case 5:this.stickerListStore.updateUploadedData(t,i,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return F.apply(this,arguments)})},{key:"initSequenceInfoCache",value:function(e){var t,n=this,r=function(){var e=Date.now();return{expireTime:e+72e5,refreshTime:e,silentRefreshTime:e+Z}},i=new g({initCacheData:(0,l.Z)({data:e},r()),refresh:(t=(0,c.Z)((0,s.Z)().mark((function t(){var a,o,c,u,d;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.refreshStickerSequenceUrls(e);case 2:return o=t.sent,c=o.gifCoverUrl,u=o.gifLargeImageUrl,d=null!==(a=i.getSync())&&void 0!==a?a:e,t.abrupt("return",(0,l.Z)({data:(0,l.Z)((0,l.Z)({},d),{},{gifCover:(0,l.Z)((0,l.Z)({},d.gifCover),{},{url:c}),gifLargeImage:(0,l.Z)((0,l.Z)({},d.gifLargeImage),{},{url:u})})},r()));case 7:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return i}},{key:"refreshStickerSequenceUrls",value:(N=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,o,c,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gifCover,r=t.gifLargeImage,e.next=3,(0,m.nz)({uri_infos:[{uri:n.uri,width:0,height:0,format:"image"},{uri:r.uri,width:0,height:0,format:"image"}]});case 3:if(i=e.sent,a=i.uri_to_url,o=[],(c=a[n.uri])||o.push("cover-".concat(n.uri)),(l=a[r.uri])||o.push("largeImage-".concat(r.uri)),c&&l){e.next=12;break}throw new Error("Failed to get url for ".concat(o.join(", ")));case 12:return e.abrupt("return",{gifCoverUrl:c,gifLargeImageUrl:l});case 13:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)})},{key:"checkRequirements",value:(I=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSequence){e.next=3;break}return this.stickerListStore.updateUnmetRequirements(t,[]),e.abrupt("return");case 3:n=[],r=v.rg.minImageSize,(t.width<r||t.height<r)&&n.push(v.fD.MinImageSize),this.stickerListStore.updateUnmetRequirements(t,n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"reimportSticker",value:(j=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r,i,a,c,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOpenStickerFilePickerRequest((0,l.Z)({minCount:1,maxCount:1,maxTotalCount:1},n));case 2:return r=e.sent,e.next=5,this.props.api.openStickerFilePicker((0,l.Z)((0,l.Z)({},r),{},{multiple:!1}));case 5:if(i=e.sent,0!==(a=this.initStickers(i)).length){e.next=9;break}return e.abrupt("return",null);case 9:return c=(0,o.Z)(a,1),u=c[0],this.cleanupStickerInfo(t),this.stickerListStore.reimportSticker(t.id,u),e.abrupt("return",u.id);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"retryUpload",value:(C=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.retryUploadStickersIfNeeded(this.stickerListStore.stickers,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"retryUploadStickersIfNeeded",value:(b=(0,c.Z)((0,s.Z)().mark((function e(t,n){var r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=[],t.forEach((function(e){!e.isUploadFailed||e.unmetRequirements.length>0||(e.isSequence&&e.uri?i.push(e):r.push(e))})),this.retryGenerateSequence(i),e.abrupt("return",this.retryUploadFile(r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"retryUploadFile",value:(S=(0,c.Z)((0,s.Z)().mark((function e(t,n){var i,a,o,c=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.map((function(e){return e.id})),(a=[].concat((0,r.Z)(i),(0,r.Z)(n))).length){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.getOpenStickerFilePickerRequest({minCount:1,maxCount:a.length,maxTotalCount:a.length});case 7:o=e.sent,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),(0,k.RF)("[ImportStickerFileService] retryUploadFile get request failed",e.t0,{retryUploadIds:a}),e.t0;case 14:this.props.stickerListStore.startToRetryUploadStickers(i),a.forEach((function(e){return c.recordFileUploadStart(e)})),this.props.api.openStickerFilePicker((0,l.Z)((0,l.Z)({},o),{},{retryUploadIds:a})),(0,k.c6)("[ImportStickerFileService] retryUploadFile start",{retryUploadIds:a});case 18:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e,t){return S.apply(this,arguments)})},{key:"retryGenerateSequence",value:function(e){var t=this,n=e.map((function(e){return e.id}));n.length&&(this.stickerListStore.startToRetryUploadStickers(n),n.forEach((function(e){return t.recordFileUploadStart(e)})),this.batchGenerateSequenceSticker(e),(0,k.c6)("[ImportStickerFileService] retryGenerateSequence start",{stickerIds:n}))}},{key:"updateSequenceSettings",value:function(e){var t=e.newSettings,n=[];if(e.isApplyToAll)n=this.stickerListStore.stickers.filter((function(e){return e.isSequence}));else{if(!this.stickerListStore.selectedSticker)return;n=[this.stickerListStore.selectedSticker]}var r=n.filter((function(e){return e.isUploadFailed||e.sequenceSettings.fps!==t.fps||e.sequenceSettings.loop!==t.loop}));if(0!==r.length){this.stickerListStore.startToUpdateSequenceSettings(r,t);var i=r.filter((function(e){return!e.isUploadFailed&&e.uri})),a=r.filter((function(e){return e.isUploadFailed}));this.batchGenerateSequenceSticker(i),this.retryUploadStickersIfNeeded(a,[])}}},{key:"batchGenerateSequenceSticker",value:(y=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,a,o=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,i.Z)((0,f.Z)(t,10)),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=15;break}return a=r.value,e.prev=5,e.next=8,Promise.all(a.map((function(e){return o.generateSequenceSticker(e)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,k.RF)("[ImportStickerFileService] batchGenerateSequenceSticker failed",e.t0,{stickers:a.map((function(e){return e.id}))});case 13:e.next=3;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),n.e(e.t1);case 20:return e.prev=20,n.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23],[5,10]])}))),function(e){return y.apply(this,arguments)})},{key:"generateCollectionCover",value:(w=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collectionId,e.next=3,this.getUploadConfigs("generateCollectionCover");case 3:return r=e.sent,i=t.stickers.map((function(e){return(0,l.Z)({id:e.id},e.sequenceSettings)})),(0,k.c6)("[ImportStickerFileService] generateCollectionCover start",{collectionId:n,stickers:i}),e.next=8,this.props.api.generateStickerCollectionCoverImage((0,l.Z)((0,l.Z)({},r),{},{collectionId:n,stickers:i}));case 8:return a=e.sent,o=a.id,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"openStickerOnlineImageEditor",value:(n=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stickers,r=(0,a.Z)(t,_),e.next=3,this.getUploadConfigs("openStickerOnlineImageEditor");case 3:return i=e.sent,e.next=6,this.props.api.openStickerOnlineImageEditor((0,l.Z)((0,l.Z)((0,l.Z)({},r),i),{},{stickers:n.map((function(e){return(0,l.Z)({id:e.id},e.sequenceSettings)}))}));case 6:return o=e.sent,c=o.id,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"localUploadImage",value:(t=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOpenStickerFilePickerRequest((0,l.Z)((0,l.Z)({},t),{},{minCount:1,maxCount:1,maxTotalCount:1}));case 2:return n=e.sent,e.next=5,this.props.api.openStickerFilePicker((0,l.Z)((0,l.Z)({},n),{},{multiple:!1,enableImportSequence:!1}));case 5:return r=e.sent,i=r.images,e.abrupt("return",0===i.length?null:i[0]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.unregisterStickerFileProcessResultEvent()}}]),e}()},42518:function(e,t,n){n.d(t,{r:function(){return p}});var r=n(43941),i=n(66097),a=n(49919),s=n(87989),o=n(51852),c=n(29391),l=n(93639),u=n(97545),d=n(7723),p=function(){function e(){(0,s.Z)(this,e)}var t,n,p,f,m;return(0,o.Z)(e,[{key:"getJSBRequest",value:function(e){var t=e.accept.split(",").map((function(e){return e.trim().replace(/^\./g,"")})).join("-");return(0,a.Z)((0,a.Z)({},e),{},{accept:t})}},{key:"openStickerFilePicker",value:(m=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getJSBRequest(t),(0,d.c6)("[JSB] openStickerFilePicker req --\x3e",(0,a.Z)({},(0,l.Z)(i,["objectUploadConfig","imageUploadConfig","sequence"]))),e.next=4,(0,u.G3)(i);case 4:return s=e.sent,(0,d.c6)("[JSB] openStickerFilePicker resp <--",{isSequenceImport:null==s?void 0:s.isSequenceImport,imagesCount:null==s||null===(n=s.images)||void 0===n?void 0:n.length}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"uploadDroppedStickerFiles",value:(f=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getJSBRequest(t),(0,d.c6)("[JSB] uploadDroppedStickerFiles req --\x3e",(0,a.Z)({},(0,l.Z)(i,["objectUploadConfig","imageUploadConfig","sequence"]))),e.next=4,(0,u.NP)(i);case 4:return s=e.sent,(0,d.c6)("[JSB] uploadDroppedStickerFiles resp <--",{isSequenceImport:null==s?void 0:s.isSequenceImport,imagesCount:null==s||null===(n=s.images)||void 0===n?void 0:n.length}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"registerStickerFileProcessResultEvent",value:function(e){return(0,u.mD)((function(t){(0,d.c6)("[JSB] StickerFileProcessResult ".concat(null==t?void 0:t.type," ").concat(null==t?void 0:t.id),(0,a.Z)({},(0,c.Z)(t,["result","uri","error"]))),e(t)}))}},{key:"saveSequenceGifUrl",value:(p=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,d.c6)("[JSB] saveSequenceGifUrl ".concat(t.id)),e.next=4,(0,u.QN)(t);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return p.apply(this,arguments)})},{key:"generateStickerCollectionCoverImage",value:(n=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.c6)("[JSB] generateStickerCollectionCoverImage req --\x3e",(0,a.Z)({},(0,l.Z)(t,["objectUploadConfig","imageUploadConfig"]))),e.next=3,(0,u.uG)(t);case 3:return n=e.sent,(0,d.c6)("[JSB] generateStickerCollectionCoverImage resp <--",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"openStickerOnlineImageEditor",value:(t=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.c6)("[JSB] openStickerOnlineImageEditor req --\x3e",(0,a.Z)({},(0,l.Z)(t,["objectUploadConfig","imageUploadConfig"]))),e.next=3,(0,u.dV)(t);case 3:return n=e.sent,(0,d.c6)("[JSB] openStickerOnlineImageEditor resp <--",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()},52278:function(e,t,n){n.d(t,{YL:function(){return x},pg:function(){return Z},t9:function(){return _}});var r=n(49919),i=n(87989),a=n(51852),s=n(58216),o=n(50959),c=n(78367),l=n(29922),u=n(97545);function d(e){(0,u.qx)(e)}function p(e){return void 0===e?e:String(Math.round(e/1024))}function f(e){var t=e.material_category,n=e.material_type,i=e.collection_detail;return(0,r.Z)({material_category:t,material_type:n},i&&"collection"===n&&{collection_detail:i})}function m(e){var t=e.error_report,n=e.upload_status,i=e.time,a=e.isCompressed,s=e.sizeBeforeCompress,o=e.sizeAfterCompress,c=e.resolutionBeforeCompress,l=e.resolutionAfterCompress,u=e.extra;d({eventName:"personal_page_material_upload_status",params:(0,r.Z)((0,r.Z)((0,r.Z)({},f(e)),{},{error_report:t,upload_status:n,time:i,is_compressed:a?1:0},a&&{material_size_before_compress:p(s),material_size_after_compress:p(o),material_resolution_before_compress:c,material_resolution_after_compress:l}),u)})}function v(e){if(0!==e.length){var t=function(e){var t={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var n=(0,l.Z)(e,2),r=n[0],i=n[1]||"";t[r]=t[r]?"".concat(t[r],",").concat(i):i}))})),t}(e),n=new Set(t.material_type.split(","));1===n.size&&(t.material_type=n.values().next().value),d({eventName:"personal_page_material_publish_error_report",params:t})}}function h(e){var t=e.status,n=e.material_type,i=e.material_category,a=e.title,s=e.description,o=e.isOriginal,c=e.tags,l=e.material_format,u=e.material_size,f=e.resolution,m=e.error_type,v=e.cover_type,h=e.time,g=e.extra;return d({eventName:"personal_page_material_publish_status",params:(0,r.Z)((0,r.Z)({status:t,material_type:n,material_category:i,material_title:a,material_introduction:s,is_original:o?"1":"0",hashtag:c.join(","),material_format:l,material_size:p(u),resolution:f},"fail"===t&&{error_type:m}),{},{cover_type:v,time:h},g)})}var g=n(24738),k=n(18672),x=function(){function e(t){(0,i.Z)(this,e),(0,s.Z)(this,"materialTypeParams",{material_category:"",material_type:""}),(0,s.Z)(this,"isCollection",!1),this.isCollection=t.itemType===g.qG.StickerCollection,this.materialTypeParams={material_category:"sticker",material_type:this.isCollection?"collection":"single"}}return(0,a.Z)(e,[{key:"sendPageActionLog",value:function(e){!function(e){var t=e.action,n=e.extra;d({eventName:"personal_page_material_publish_page_action",params:(0,r.Z)((0,r.Z)({action:t},f(e)),n)})}((0,r.Z)((0,r.Z)((0,r.Z)({},this.materialTypeParams),e),this.isCollection&&{collection_detail:e.collection_detail||"collection_all"}))}},{key:"sendUploadActionLog",value:function(e){var t="mainForm"===e.mainFormLayout?"upload_more":"sticker_upload";this.sendPageActionLog({action:t})}},{key:"sendStartEditSequenceSettingsLog",value:function(e){var t=e.collection_detail;this.sendPageActionLog({action:"animation_edit",collection_detail:t})}},{key:"sendSaveSequenceSettingsLog",value:function(e){var t=e.collection_detail,n=e.sequenceSettings;this.sendPageActionLog({action:"animation_edit_save",collection_detail:t,extra:(0,r.Z)({},n&&{animation_cycle_detail:n.loop?"repeat":"once",animation_fps_detail:String(n.fps),animation_is_applied_to_all:n.sequenceSettingsApplyToAll?"1":"0"})})}},{key:"sendStickerUploadStatusLog",value:function(e){var t=e.sticker,n=e.stats,i=t.isSequence,a=t.isUploadFailed,s=i&&a&&t.uri&&"sequencial_material_failed",o=!a&&t.largeImageUri&&"success",c=n.isCompressed,l=n.resolutionBeforeCompress,u=n.resolutionAfterCompress,d=n.sizeBeforeCompress,p=n.sizeAfterCompress,f=n.uploadTime,v=n.uploadError;m((0,r.Z)((0,r.Z)((0,r.Z)({},this.materialTypeParams),this.isCollection&&{collection_detail:"collection_material"}),{},{error_report:v,upload_status:s||o||"fail",time:f,isCompressed:c,resolutionBeforeCompress:l,resolutionAfterCompress:u,sizeBeforeCompress:d,sizeAfterCompress:p,extra:(0,r.Z)({},void 0!==i&&{is_sequential:i?1:0})}))}},{key:"sendCollectionUploadStatusLog",value:function(e){var t=e.cover,n=e.exampleImage,i=e.stats,a=(t||n).isUploadFailed,s=i.isCompressed,o=i.resolutionBeforeCompress,c=i.resolutionAfterCompress,l=i.sizeBeforeCompress,u=i.sizeAfterCompress,d=i.uploadTime,p=i.uploadError;m((0,r.Z)((0,r.Z)({},this.materialTypeParams),{},{collection_detail:t?"collection_cover":"collection_sample",error_report:p,upload_status:a?"fail":"success",time:d,isCompressed:s,resolutionBeforeCompress:o,resolutionAfterCompress:c,sizeBeforeCompress:l,sizeAfterCompress:u}))}},{key:"sendStickerImportErrorLog",value:function(e){return function(e){var t=e.error_report;d({eventName:"personal_page_material_import_error_report",params:(0,r.Z)((0,r.Z)({},f(e)),{},{error_report:t})})}((0,r.Z)((0,r.Z)({},this.materialTypeParams),e))}},{key:"sendStickerPublishErrorLog",value:function(e){var t=this;return v(e.map((function(e){return(0,r.Z)((0,r.Z)({},t.materialTypeParams),e)})))}},{key:"sendStickerPublishStatusLog",value:function(e){var t=e.stickerParams,n=e.collectionParams,i=e.error,a=e.time,s=i?"fail":"success";if(t){var o=t.sticker,l=t.stickerReqItem,u=t.stats,d=l.common_data,p=o.isSequence,f=o.sequenceSettings,m=o.path;return h({status:s,material_category:this.materialTypeParams.material_category,material_type:"single",title:d.title,isOriginal:d.is_original||!1,tags:d.tags||[],material_format:p?"zip":(0,k.lm)(m),material_size:u.sizeAfterCompress,resolution:u.resolutionAfterCompress,error_type:i,time:a,extra:(0,r.Z)({sticker_type:(0,c.w3)(o)?"gif":"png",sticker_animation:p?"1":"0"},p&&{animation_cycle_detail:f.loop?"repeat":"once",animation_fps_detail:String(f.fps)})})}var v=n,g=v.collection,x=v.collectionReqItem.common_data;return h((0,r.Z)((0,r.Z)({status:s},this.materialTypeParams),{},{title:x.title,description:x.description||"",isOriginal:x.is_original||!1,tags:x.tags||[],error_type:i,cover_type:g.cover.generatedFrom,time:a,extra:{sticker_animation:"0"}}))}}]),e}();function _(e){(0,o.useEffect)((function(){e.sendPageActionLog({action:"upload_page_show"})}),[])}function Z(e){var t=e.mainFormLayout,n=e.sendLogServ;(0,o.useEffect)((function(){"mainForm"===t&&n.sendPageActionLog({action:"detail_page_show"})}),[t])}},60174:function(e,t,n){n.d(t,{gd:function(){return T},Nr:function(){return R},LP:function(){return U}});var r=n(43941),i=n(66097),a=n(20057),s=n(18513),o=n(50959),c=n(78979),l=n(21571),u=n(87989),d=n(51852),p=n(58216),f=n(84875),m=n.n(f),v=n(39465),h=function(){function e(){(0,u.Z)(this,e),(0,p.Z)(this,"documentLoadPromise",this.initDocumentLoadPromise())}var t;return(0,d.Z)(e,[{key:"initDocumentLoadPromise",value:function(){return new Promise((function(e){if("complete"!==document.readyState){document.addEventListener("load",(function t(){e(),document.removeEventListener("load",t)}))}else e()}))}},{key:"preloadImagesOnIdle",value:(t=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.documentLoadPromise;case 2:n=window.requestIdleCallback||window.setTimeout,i=(0,v.Z)(t),e.prev=4,s=(0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.value,e.next=3,new Promise((function(e){n((function(){var n=new Image;n.src=t.src,n.onload=function(){return e()},n.onerror=function(){return e()},window.setTimeout(e,3e3)}))}));case 3:case"end":return e.stop()}}),e)})),i.s();case 7:if((a=i.n()).done){e.next=11;break}return e.delegateYield(s(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),i.e(e.t1);case 16:return e.prev=16,i.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[4,13,16,19]])}))),function(e){return t.apply(this,arguments)})}]),e}(),g=new h,k="VcsGt",x=n(11527);var _=function(e){var t=e.className,n=e.size,r=void 0===n?64:n;return(0,x.jsx)("img",{src:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/images/LoadingScissorsCapCut.d9f5d23b.gif",className:m()(t,k),style:{height:r,width:r}})};g.preloadImagesOnIdle([{src:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/lm_shpylaht_cs/ljhwZthlaukjlkulzlp/pc-heycan/images/LoadingScissorsCapCut.d9f5d23b.gif"}]);var Z=n(78794),w=n(37206),y=n(44478),S="LGkvB",b="fE_gj",C="jLOlf",j="qnYZs",I=function(){var e=(0,Z.$)().t;return(0,x.jsxs)("div",{className:b,children:[(0,x.jsx)(_,{className:C}),(0,x.jsx)("div",{className:j,children:e("pc_sticker_load_web")})]})},N=function(){function e(){(0,u.Z)(this,e),(0,p.Z)(this,"destroyLoading",null)}var t;return(0,d.Z)(e,[{key:"show",value:(t=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t(),this.showImpl(),e.next=5,n;case 5:return e.prev=5,this.hide(),e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[0,,5,8]])}))),function(e){return t.apply(this,arguments)})},{key:"hide",value:function(){var e;null===(e=this.destroyLoading)||void 0===e||e.call(this),this.destroyLoading=null}},{key:"showImpl",value:function(){if(!this.destroyLoading){var e=document.createElement("div");e.className=S,document.body.appendChild(e);var t=(0,y.createRoot)(e);this.destroyLoading=function(){e.remove(),Promise.resolve().then((function(){return t.unmount()}))},t.render((0,x.jsx)(w.a,{i18n:l.oc.i18nInstance.instance,children:(0,x.jsx)(I,{})}))}}}]),e}(),F=new N,E=n(7723);function R(e){return L.apply(this,arguments)}function L(){return(L=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.logPrefix,a=t.when,(s=t.importServ).uploadConfigsCache.isExpired()){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",F.show((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.uploadConfigsCache.updateCache();case 3:e.next=10;break;case 5:throw e.prev=5,e.t0=e.catch(0),c.FN.error(l.oc.t("pc_sticker_failed_retry_web")),(0,E.RF)("".concat(n," refreshUploadConfigs failed when ").concat(a),e.t0,{action:a}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=e.logPrefix,n=e.sticker,r=e.publishResult,i=e.sendLogServ,a=e.importServ,s=r.req,o=r.error,c=r.errorText,l=r.time,u=r.resourceId;i.sendStickerPublishStatusLog({error:c,time:l,stickerParams:{sticker:n,stickerReqItem:s,stats:a.getFileStats(n.id)}});var d=n.id;o?(0,E.RF)("".concat(t," sticker publish failed"),o,{id:d}):(0,E.c6)("".concat(t," sticker publish success"),{id:d,resourceId:u})}var P=5e3;function U(e){var t=e.watch,n=e.collect,c=(0,o.useMemo)((function(){return(0,a.Z)((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:n();case 3:case"end":return e.stop()}}),e)}))),P)}),[]);(0,o.useEffect)((function(){var e=(0,s.EH)((function(){t(),c()}));return function(){e(),c.cancel()}}),[])}},67407:function(e,t,n){n.d(t,{l:function(){return c}});var r=n(43941),i=n(66097),a=n(87989),s=n(51852),o=n(58216),c=function(){function e(){(0,a.Z)(this,e),(0,o.Z)(this,"lockedKey",new Set)}var t;return(0,s.Z)(e,[{key:"lock",value:(t=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lockedKey.has(t)){e.next=2;break}return e.abrupt("return",null);case 2:return this.lockedKey.add(t),e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,this.lockedKey.delete(t),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])}))),function(e,n){return t.apply(this,arguments)})}]),e}()},36928:function(e,t,n){n.d(t,{L:function(){return m},Z:function(){return v}});var r=n(43941),i=n(49919),a=n(17576),s=n(66097),o=n(87989),c=n(51852),l=n(39566),u=function(e){return e[e.Succeed=1]="Succeed",e[e.Fail=0]="Fail",e[e.NotAuthroized=-1]="NotAuthroized",e[e.NoHandler=-2]="NoHandler",e[e.ParameterError=-3]="ParameterError",e[e.UnknownError=-1e3]="UnknownError",e}({}),d=n(7723),p=["onConfirm","onCancel"],f=function(e){return e[e.Unknown=0]="Unknown",e[e.InfoDialog=1]="InfoDialog",e[e.AlertDialog=2]="AlertDialog",e}(f||{}),m=function(e){return e.Unknown="Unknown",e.Confirm="confirm",e.Cancel="cancel",e.Optional="optional",e.CheckboxClick="checkboxClick",e}({}),v=function(){function e(){(0,o.Z)(this,e)}var t,n,v;return(0,c.Z)(e,null,[{key:"callDialog",value:(v=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,o,c,f,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.onConfirm,o=n.onCancel,c=(0,a.Z)(n,p),f=(0,i.Z)({id:"pc_heycan",type:t},c),e.next=4,l.ZP.call("showDialog",f);case 4:if((v=e.sent).code===u.Succeed){e.next=8;break}throw(0,d.RF)("[ConfirmModal] jsb error",null,(0,i.Z)((0,i.Z)({type:t},n),v)),v;case 8:return v.data.actionType===m.Confirm&&(null==s||s()),v.data.actionType===m.Cancel&&(null==o||o()),e.abrupt("return",v.data.actionType);case 11:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)})},{key:"confirm",value:(n=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callDialog(f.InfoDialog,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"warn",value:(t=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callDialog(f.AlertDialog,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},40209:function(e,t,n){n.d(t,{_:function(){return s}});var r=n(86094),i=n(82242),a=n(78794),s=function(){var e=(0,a.$)().i18n;return{getDisplayLength:(0,i.Z)((function(t){return(0,r.xB)({len:t,i18n:e})}))}}},55234:function(e,t,n){n.d(t,{Qt:function(){return a}});var r=n(3972),i=n(50959),a=function(e){return e.TagEachUser="TagEachUser",e.UseHasAgree="useHasAgree",e}({}),s={TagEachUser:20};t.ZP=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s[e];return{get:(0,i.useCallback)((function(){return JSON.parse(localStorage.getItem(e)||"{}")[t]||[]}),[t,e]),set:(0,i.useCallback)((function(i,a){var s=JSON.parse(localStorage.getItem(e)||"{}"),o=s[t]||[],c=[];"add"===i?(Array.isArray(a)?o.unshift.apply(o,(0,r.Z)(a)):o.unshift(a),c=Array.isArray(a)?Array.from(new Set(o.slice(0,n))):a):"remove"===i?c=o.filter((function(e){return Array.isArray(a)?a.includes(e):e!==a})):"change"===i&&(c=a),s[t]=c;var l=JSON.stringify(s);localStorage.setItem(e,l)}),[t,e])}}},72623:function(e,t,n){n.d(t,{e:function(){return s}});var r=n(18513),i=n(49765),a=n(50959),s=function(e){var t=(0,i.fv)((function(){return{disposer:null,resolve:null,start:function(){return t.stop(),new Promise((function(n){t.resolve=n,t.disposer=(0,r.EH)((function(){e.watch()&&(n(),t.stop())}))}))},stop:function(){var e;null===(e=t.disposer)||void 0===e||e.call(t),t.disposer=null,t.resolve=null}}}));return(0,a.useEffect)((function(){return function(){return t.stop()}}),[]),t}},96057:function(e,t,n){n.d(t,{F:function(){return s}});var r=n(50959),i=n(97545),a=n(7723),s=function(e){(0,r.useEffect)((function(){(0,i.Td)({title:e.title}),(0,a.$G)({pid:e.pid})}),[])}},64514:function(e,t,n){n.d(t,{B:function(){return s}});var r=n(87989),i=n(51852),a=n(58216),s=function(){function e(){(0,r.Z)(this,e),(0,a.Z)(this,"timeoutHandle",null)}return(0,i.Z)(e,[{key:"timeout",value:function(e){var t=this;return this.cancel(),new Promise((function(n){t.timeoutHandle=setTimeout((function(){t.timeoutHandle=null,n()}),e)}))}},{key:"cancel",value:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null)}},{key:"hasTimeout",value:function(){return null!==this.timeoutHandle}}]),e}()},67819:function(e,t,n){n.d(t,{a:function(){return i}});var r=n(86094);function i(e,t){if(2*e.length<=t)return e;for(var n=0,i=0;i<e.length;i+=1)if((n+=(0,r.O1)(e[i]))>t)return e.slice(0,i);return e}},96682:function(e,t,n){n.d(t,{r:function(){return o}});var r,i,a=n(50959);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var o=function(e){return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},e),r||(r=a.createElement("rect",{width:18,height:18,fill:"#29292D",opacity:.5,rx:9})),i||(i=a.createElement("path",{stroke:"#FAFAFA",strokeWidth:1.35,d:"M13.925 9a4.924 4.924 0 1 0-1.443 3.482"})))}},71514:function(e,t){t.Z={root:"yumxD",animated:"IHczO","loading-circle-rotate":"g3W34",loadingCircleRotate:"g3W34"}},99137:function(e,t){t.Z={modal:"ixKV9",Protoal:"q1Osp",protoal:"q1Osp",title:"LtvpO",content:"OyCrK","draft-container":"D0WUS",draftContainer:"D0WUS",gradientWrap:"xsIHa",tips:"_7MTV",footer:"PL68k",btn:"az9uH"}}}]);